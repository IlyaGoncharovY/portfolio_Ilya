"use strict";(self.webpackChunkportfolio=self.webpackChunkportfolio||[]).push([[708],{1169:(e,t,r)=>{r.d(t,{H:()=>Ce});var n=r(7462),s=r(7313),o=r(238),a=r(5825);class i extends a.Mesh{constructor(e,t){var r,n;const s=(o=e)&&o.isCubeTexture;var o;const i=(null!=(n=s?null==(r=e.image[0])?void 0:r.width:e.image.width)?n:1024)/4,c=Math.floor(Math.log2(i)),A=Math.pow(2,c),l=3*Math.max(A,112),u=4*A,B=[s?"#define ENVMAP_TYPE_CUBE":"","#define CUBEUV_TEXEL_WIDTH ".concat(1/l),"#define CUBEUV_TEXEL_HEIGHT ".concat(1/u),"#define CUBEUV_MAX_MIP ".concat(c,".0")].join("\n")+"\n        #define ENVMAP_TYPE_CUBE_UV\n        varying vec3 vWorldPosition;\n        uniform float radius;\n        uniform float height;\n        uniform float angle;\n        #ifdef ENVMAP_TYPE_CUBE\n            uniform samplerCube map;\n        #else\n            uniform sampler2D map;\n        #endif\n        // From: https://www.shadertoy.com/view/4tsBD7\n        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) \n        {\n            float d = dot ( rd, n );\n            \n            if( d > 0.0 ) { return 1e6; }\n            \n            vec3  o = ro - c;\n            float t = - dot( n, o ) / d;\n            vec3  q = o + rd * t;\n            \n            return ( dot( q, q ) < r * r ) ? t : 1e6;\n        }\n        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm\n        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) \n        {\n            vec3 oc = ro - ce;\n            float b = dot( oc, rd );\n            float c = dot( oc, oc ) - ra * ra;\n            float h = b * b - c;\n            \n            if( h < 0.0 ) { return -1.0; }\n            \n            h = sqrt( h );\n            \n            return - b + h;\n        }\n        vec3 project() \n        {\n            vec3 p = normalize( vWorldPosition );\n            vec3 camPos = cameraPosition;\n            camPos.y -= height;\n            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );\n            if( intersection > 0.0 ) {\n                \n                vec3 h = vec3( 0.0, - height, 0.0 );\n                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );\n                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;\n            } else {\n                p = vec3( 0.0, 1.0, 0.0 );\n            }\n            return p;\n        }\n        #include <common>\n        #include <cube_uv_reflection_fragment>\n        void main() \n        {\n            vec3 projectedWorldPosition = project();\n            \n            #ifdef ENVMAP_TYPE_CUBE\n                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;\n            #else\n                vec3 direction = normalize( projectedWorldPosition );\n                vec2 uv = equirectUv( direction );\n                vec3 outcolor = texture2D( map, uv ).rgb;\n            #endif\n            gl_FragColor = vec4( outcolor, 1.0 );\n            #include <tonemapping_fragment>\n            #include <".concat(parseInt(a.REVISION.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment",">\n        }\n        "),h={map:{value:e},height:{value:(null==t?void 0:t.height)||15},radius:{value:(null==t?void 0:t.radius)||100}};super(new a.IcosahedronGeometry(1,16),new a.ShaderMaterial({uniforms:h,fragmentShader:B,vertexShader:"\n        varying vec3 vWorldPosition;\n        void main() \n        {\n            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );\n            vWorldPosition = worldPosition.xyz;\n            \n            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n        }\n        ",side:a.DoubleSide}))}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}class c extends a.DataTextureLoader{constructor(e){super(e),this.type=a.HalfFloatType}parse(e){const t=function(e,t){switch(e){case 1:console.error("THREE.RGBELoader Read Error: "+(t||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(t||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(t||""));break;default:console.error("THREE.RGBELoader: Error: "+(t||""))}return-1},r=function(e,t,r){t=t||1024;let n=e.pos,s=-1,o=0,a="",i=String.fromCharCode.apply(null,new Uint16Array(e.subarray(n,n+128)));for(;0>(s=i.indexOf("\n"))&&o<t&&n<e.byteLength;)a+=i,o+=i.length,n+=128,i+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(n,n+128)));return-1<s&&(!1!==r&&(e.pos+=o+s+1),a+i.slice(0,s))},n=function(e,t,r,n){const s=e[t+3],o=Math.pow(2,s-128)/255;r[n+0]=e[t+0]*o,r[n+1]=e[t+1]*o,r[n+2]=e[t+2]*o,r[n+3]=1},s=function(e,t,r,n){const s=e[t+3],o=Math.pow(2,s-128)/255;r[n+0]=a.DataUtils.toHalfFloat(Math.min(e[t+0]*o,65504)),r[n+1]=a.DataUtils.toHalfFloat(Math.min(e[t+1]*o,65504)),r[n+2]=a.DataUtils.toHalfFloat(Math.min(e[t+2]*o,65504)),r[n+3]=a.DataUtils.toHalfFloat(1)},o=new Uint8Array(e);o.pos=0;const i=function(e){const n=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,s=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,o=/^\s*FORMAT=(\S+)\s*$/,a=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,i={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let c,A;if(e.pos>=e.byteLength||!(c=r(e)))return t(1,"no header found");if(!(A=c.match(/^#\?(\S+)/)))return t(3,"bad initial token");for(i.valid|=1,i.programtype=A[1],i.string+=c+"\n";c=r(e),!1!==c;)if(i.string+=c+"\n","#"!==c.charAt(0)){if((A=c.match(n))&&(i.gamma=parseFloat(A[1])),(A=c.match(s))&&(i.exposure=parseFloat(A[1])),(A=c.match(o))&&(i.valid|=2,i.format=A[1]),(A=c.match(a))&&(i.valid|=4,i.height=parseInt(A[1],10),i.width=parseInt(A[2],10)),2&i.valid&&4&i.valid)break}else i.comments+=c+"\n";return 2&i.valid?4&i.valid?i:t(3,"missing image size specifier"):t(3,"missing format specifier")}(o);if(-1!==i){const e=i.width,r=i.height,c=function(e,r,n){const s=r;if(s<8||s>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);if(s!==(e[2]<<8|e[3]))return t(3,"wrong scanline width");const o=new Uint8Array(4*r*n);if(!o.length)return t(4,"unable to allocate buffer space");let a=0,i=0;const c=4*s,A=new Uint8Array(4),l=new Uint8Array(c);let u=n;for(;u>0&&i<e.byteLength;){if(i+4>e.byteLength)return t(1);if(A[0]=e[i++],A[1]=e[i++],A[2]=e[i++],A[3]=e[i++],2!=A[0]||2!=A[1]||(A[2]<<8|A[3])!=s)return t(3,"bad rgbe scanline format");let r,n=0;for(;n<c&&i<e.byteLength;){r=e[i++];const s=r>128;if(s&&(r-=128),0===r||n+r>c)return t(3,"bad scanline data");if(s){const t=e[i++];for(let e=0;e<r;e++)l[n++]=t}else l.set(e.subarray(i,i+r),n),n+=r,i+=r}const B=s;for(let e=0;e<B;e++){let t=0;o[a]=l[e+t],t+=s,o[a+1]=l[e+t],t+=s,o[a+2]=l[e+t],t+=s,o[a+3]=l[e+t],a+=4}u--}return o}(o.subarray(o.pos),e,r);if(-1!==c){let t,o,A;switch(this.type){case a.FloatType:A=c.length/4;const e=new Float32Array(4*A);for(let t=0;t<A;t++)n(c,4*t,e,4*t);t=e,o=a.FloatType;break;case a.HalfFloatType:A=c.length/4;const r=new Uint16Array(4*A);for(let t=0;t<A;t++)s(c,4*t,r,4*t);t=r,o=a.HalfFloatType;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type)}return{width:e,height:r,data:t,header:i.string,gamma:i.gamma,exposure:i.exposure,type:o}}}return null}setDataType(e){return this.type=e,this}load(e,t,r,n){return super.load(e,(function(e,r){switch(e.type){case a.FloatType:case a.HalfFloatType:"colorSpace"in e?e.colorSpace="srgb-linear":e.encoding=3e3,e.minFilter=a.LinearFilter,e.magFilter=a.LinearFilter,e.generateMipmaps=!1,e.flipY=!0}t&&t(e,r)}),r,n)}}var A=Uint8Array,l=Uint16Array,u=Uint32Array,B=new A([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),h=new A([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),d=new A([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),f=function(e,t){for(var r=new l(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];var s=new u(r[30]);for(n=1;n<30;++n)for(var o=r[n];o<r[n+1];++o)s[o]=o-r[n]<<5|n;return[r,s]},C=f(B,2),m=C[0],p=C[1];m[28]=258,p[258]=28;for(var g=f(h,0),M=g[0],v=(g[1],new l(32768)),E=0;E<32768;++E){var F=(43690&E)>>>1|(21845&E)<<1;F=(61680&(F=(52428&F)>>>2|(13107&F)<<2))>>>4|(3855&F)<<4,v[E]=((65280&F)>>>8|(255&F)<<8)>>>1}var G=function(e,t,r){for(var n=e.length,s=0,o=new l(t);s<n;++s)++o[e[s]-1];var a,i=new l(t);for(s=0;s<t;++s)i[s]=i[s-1]+o[s-1]<<1;if(r){a=new l(1<<t);var c=15-t;for(s=0;s<n;++s)if(e[s])for(var A=s<<4|e[s],u=t-e[s],B=i[e[s]-1]++<<u,h=B|(1<<u)-1;B<=h;++B)a[v[B]>>>c]=A}else for(a=new l(n),s=0;s<n;++s)e[s]&&(a[s]=v[i[e[s]-1]++]>>>15-e[s]);return a},I=new A(288);for(E=0;E<144;++E)I[E]=8;for(E=144;E<256;++E)I[E]=9;for(E=256;E<280;++E)I[E]=7;for(E=280;E<288;++E)I[E]=8;var D=new A(32);for(E=0;E<32;++E)D[E]=5;var R=G(I,9,1),b=G(D,5,1),y=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},H=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(7&t)&r},T=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(7&t)},w=function(e){return(e/8|0)+(7&e&&1)},x=function(e,t,r){(null==t||t<0)&&(t=0),(null==r||r>e.length)&&(r=e.length);var n=new(e instanceof l?l:e instanceof u?u:A)(r-t);return n.set(e.subarray(t,r)),n},J=function(e,t,r){var n=e.length;if(!n||r&&!r.l&&n<5)return t||new A(0);var s=!t||r,o=!r||r.i;r||(r={}),t||(t=new A(3*n));var a=function(e){var r=t.length;if(e>r){var n=new A(Math.max(2*r,e));n.set(t),t=n}},i=r.f||0,c=r.p||0,l=r.b||0,u=r.l,f=r.d,C=r.m,p=r.n,g=8*n;do{if(!u){r.f=i=H(e,c,1);var v=H(e,c+1,3);if(c+=3,!v){var E=e[(N=w(c)+4)-4]|e[N-3]<<8,F=N+E;if(F>n){if(o)throw"unexpected EOF";break}s&&a(l+E),t.set(e.subarray(N,F),l),r.b=l+=E,r.p=c=8*F;continue}if(1==v)u=R,f=b,C=9,p=5;else{if(2!=v)throw"invalid block type";var I=H(e,c,31)+257,D=H(e,c+10,15)+4,J=I+H(e,c+5,31)+1;c+=14;for(var U=new A(J),L=new A(19),S=0;S<D;++S)L[d[S]]=H(e,c+3*S,7);c+=3*D;var O=y(L),P=(1<<O)-1,K=G(L,O,1);for(S=0;S<J;){var N,_=K[H(e,c,P)];if(c+=15&_,(N=_>>>4)<16)U[S++]=N;else{var k=0,Q=0;for(16==N?(Q=3+H(e,c,3),c+=2,k=U[S-1]):17==N?(Q=3+H(e,c,7),c+=3):18==N&&(Q=11+H(e,c,127),c+=7);Q--;)U[S++]=k}}var X=U.subarray(0,I),Y=U.subarray(I);C=y(X),p=y(Y),u=G(X,C,1),f=G(Y,p,1)}if(c>g){if(o)throw"unexpected EOF";break}}s&&a(l+131072);for(var j=(1<<C)-1,Z=(1<<p)-1,W=c;;W=c){var V=(k=u[T(e,c)&j])>>>4;if((c+=15&k)>g){if(o)throw"unexpected EOF";break}if(!k)throw"invalid length/literal";if(V<256)t[l++]=V;else{if(256==V){W=c,u=null;break}var z=V-254;if(V>264){var q=B[S=V-257];z=H(e,c,(1<<q)-1)+m[S],c+=q}var $=f[T(e,c)&Z],ee=$>>>4;if(!$)throw"invalid distance";c+=15&$;Y=M[ee];if(ee>3){q=h[ee];Y+=T(e,c)&(1<<q)-1,c+=q}if(c>g){if(o)throw"unexpected EOF";break}s&&a(l+131072);for(var te=l+z;l<te;l+=4)t[l]=t[l-Y],t[l+1]=t[l+1-Y],t[l+2]=t[l+2-Y],t[l+3]=t[l+3-Y];l=te}}r.l=u,r.p=W,r.b=l,u&&(i=1,r.m=C,r.d=f,r.n=p)}while(!i);return l==t.length?t:x(t,0,l)},U=new A(0),L=function(e){if(8!=(15&e[0])||e[0]>>>4>7||(e[0]<<8|e[1])%31)throw"invalid zlib data";if(32&e[1])throw"invalid zlib data: preset dictionaries not supported"};function S(e,t){return J((L(e),e.subarray(2,-4)),t)}var O="undefined"!=typeof TextDecoder&&new TextDecoder;try{O.decode(U,{stream:!0}),1}catch(me){}const P="colorSpace"in new a.Texture;class K extends a.DataTextureLoader{constructor(e){super(e),this.type=a.HalfFloatType}parse(e){const t=65536,r=14,n=65537,s=16384,o=Math.pow(2.7182818,2.2);const i={l:0,c:0,lc:0};function c(e,t,r,n,s){for(;r<e;)t=t<<8|Q(n,s),r+=8;r-=e,i.l=t>>r&(1<<e)-1,i.c=t,i.lc=r}const A=new Array(59);function l(e,t,r,s,o,a,l){for(var u=r,B=0,h=0;o<=a;o++){if(u.value-r.value>s)return!1;c(6,B,h,e,u);var d=i.l;if(B=i.c,h=i.lc,l[o]=d,63==d){if(u.value-r.value>s)throw"Something wrong with hufUnpackEncTable";c(8,B,h,e,u);var f=i.l+6;if(B=i.c,h=i.lc,o+f>a+1)throw"Something wrong with hufUnpackEncTable";for(;f--;)l[o++]=0;o--}else if(d>=59){if(o+(f=d-59+2)>a+1)throw"Something wrong with hufUnpackEncTable";for(;f--;)l[o++]=0;o--}}!function(e){for(var t=0;t<=58;++t)A[t]=0;for(t=0;t<n;++t)A[e[t]]+=1;var r=0;for(t=58;t>0;--t){var s=r+A[t]>>1;A[t]=r,r=s}for(t=0;t<n;++t){var o=e[t];o>0&&(e[t]=o|A[o]++<<6)}}(l)}function u(e){return 63&e}function B(e){return e>>6}const h={c:0,lc:0};function d(e,t,r,n){e=e<<8|Q(r,n),t+=8,h.c=e,h.lc=t}const f={c:0,lc:0};function C(e,t,r,n,s,o,a,i,c,A){if(e==t){n<8&&(d(r,n,s,a),r=h.c,n=h.lc);var l=r>>(n-=8);l=new Uint8Array([l])[0];if(c.value+l>A)return!1;for(var u=i[c.value-1];l-- >0;)i[c.value++]=u}else{if(!(c.value<A))return!1;i[c.value++]=e}f.c=r,f.lc=n}function m(e){return 65535&e}function p(e){var t=m(e);return t>32767?t-65536:t}const g={a:0,b:0};function M(e,t){var r=p(e),n=p(t),s=r+(1&n)+(n>>1),o=s,a=s-n;g.a=o,g.b=a}function v(e,t){var r=m(e),n=m(t),s=r-(n>>1)&65535,o=n+s-32768&65535;g.a=o,g.b=s}function E(e,t,r,n,s,o,a){for(var i,c=a<16384,A=r>s?s:r,l=1;l<=A;)l<<=1;for(i=l>>=1,l>>=1;l>=1;){for(var u,B,h,d,f=0,C=f+o*(s-i),m=o*l,p=o*i,E=n*l,F=n*i;f<=C;f+=p){for(var G=f,I=f+n*(r-i);G<=I;G+=F){var D=G+E,R=(b=G+m)+E;c?(M(e[G+t],e[b+t]),u=g.a,h=g.b,M(e[D+t],e[R+t]),B=g.a,d=g.b,M(u,B),e[G+t]=g.a,e[D+t]=g.b,M(h,d),e[b+t]=g.a,e[R+t]=g.b):(v(e[G+t],e[b+t]),u=g.a,h=g.b,v(e[D+t],e[R+t]),B=g.a,d=g.b,v(u,B),e[G+t]=g.a,e[D+t]=g.b,v(h,d),e[b+t]=g.a,e[R+t]=g.b)}if(r&l){var b=G+m;c?M(e[G+t],e[b+t]):v(e[G+t],e[b+t]),u=g.a,e[b+t]=g.b,e[G+t]=u}}if(s&l)for(G=f,I=f+n*(r-i);G<=I;G+=F){D=G+E;c?M(e[G+t],e[D+t]):v(e[G+t],e[D+t]),u=g.a,e[D+t]=g.b,e[G+t]=u}i=l,l>>=1}return f}function F(e,t,o,a,i,c){var A=o.value,m=k(t,o),p=k(t,o);o.value+=4;var g=k(t,o);if(o.value+=4,m<0||m>=n||p<0||p>=n)throw"Something wrong with HUF_ENCSIZE";var M=new Array(n),v=new Array(s);if(function(e){for(var t=0;t<s;t++)e[t]={},e[t].len=0,e[t].lit=0,e[t].p=null}(v),l(e,0,o,a-(o.value-A),m,p,M),g>8*(a-(o.value-A)))throw"Something wrong with hufUncompress";!function(e,t,n,s){for(;t<=n;t++){var o=B(e[t]),a=u(e[t]);if(o>>a)throw"Invalid table entry";if(a>r){if((l=s[o>>a-r]).len)throw"Invalid table entry";if(l.lit++,l.p){var i=l.p;l.p=new Array(l.lit);for(var c=0;c<l.lit-1;++c)l.p[c]=i[c]}else l.p=new Array(1);l.p[l.lit-1]=t}else if(a){var A=0;for(c=1<<r-a;c>0;c--){var l;if((l=s[(o<<r-a)+A]).len||l.p)throw"Invalid table entry";l.len=a,l.lit=t,A++}}}}(M,m,p,v),function(e,t,n,s,o,a,i,c,A,l){for(var m=0,p=0,g=c,M=Math.trunc(o.value+(a+7)/8);o.value<M;)for(d(m,p,n,o),m=h.c,p=h.lc;p>=r;)if((G=t[m>>p-r&16383]).len)p-=G.len,C(G.lit,i,m,p,n,0,o,A,l,g),m=f.c,p=f.lc;else{if(!G.p)throw"hufDecode issues";var v;for(v=0;v<G.lit;v++){for(var E=u(e[G.p[v]]);p<E&&o.value<M;)d(m,p,n,o),m=h.c,p=h.lc;if(p>=E&&B(e[G.p[v]])==(m>>p-E&(1<<E)-1)){p-=E,C(G.p[v],i,m,p,n,0,o,A,l,g),m=f.c,p=f.lc;break}}if(v==G.lit)throw"hufDecode issues"}var F=8-a&7;for(m>>=F,p-=F;p>0;){var G;if(!(G=t[m<<r-p&16383]).len)throw"hufDecode issues";p-=G.len,C(G.lit,i,m,p,n,0,o,A,l,g),m=f.c,p=f.lc}}(M,v,e,0,o,g,p,c,i,{value:0})}function G(e){for(var t=1;t<e.length;t++){var r=e[t-1]+e[t]-128;e[t]=r}}function I(e,t){for(var r=0,n=Math.floor((e.length+1)/2),s=0,o=e.length-1;!(s>o)&&(t[s++]=e[r++],!(s>o));)t[s++]=e[n++]}function D(e){for(var t=e.byteLength,r=new Array,n=0,s=new DataView(e);t>0;){var o=s.getInt8(n++);if(o<0){t-=(i=-o)+1;for(var a=0;a<i;a++)r.push(s.getUint8(n++))}else{var i=o;t-=2;var c=s.getUint8(n++);for(a=0;a<i+1;a++)r.push(c)}}return r}function R(e,t,r){for(var n,s=1;s<64;)65280==(n=t[e.value])?s=64:n>>8==255?s+=255&n:(r[s]=n,s++),e.value++}function b(e,t){t[0]=W(e[0]),t[1]=W(e[1]),t[2]=W(e[5]),t[3]=W(e[6]),t[4]=W(e[14]),t[5]=W(e[15]),t[6]=W(e[27]),t[7]=W(e[28]),t[8]=W(e[2]),t[9]=W(e[4]),t[10]=W(e[7]),t[11]=W(e[13]),t[12]=W(e[16]),t[13]=W(e[26]),t[14]=W(e[29]),t[15]=W(e[42]),t[16]=W(e[3]),t[17]=W(e[8]),t[18]=W(e[12]),t[19]=W(e[17]),t[20]=W(e[25]),t[21]=W(e[30]),t[22]=W(e[41]),t[23]=W(e[43]),t[24]=W(e[9]),t[25]=W(e[11]),t[26]=W(e[18]),t[27]=W(e[24]),t[28]=W(e[31]),t[29]=W(e[40]),t[30]=W(e[44]),t[31]=W(e[53]),t[32]=W(e[10]),t[33]=W(e[19]),t[34]=W(e[23]),t[35]=W(e[32]),t[36]=W(e[39]),t[37]=W(e[45]),t[38]=W(e[52]),t[39]=W(e[54]),t[40]=W(e[20]),t[41]=W(e[22]),t[42]=W(e[33]),t[43]=W(e[38]),t[44]=W(e[46]),t[45]=W(e[51]),t[46]=W(e[55]),t[47]=W(e[60]),t[48]=W(e[21]),t[49]=W(e[34]),t[50]=W(e[37]),t[51]=W(e[47]),t[52]=W(e[50]),t[53]=W(e[56]),t[54]=W(e[59]),t[55]=W(e[61]),t[56]=W(e[35]),t[57]=W(e[36]),t[58]=W(e[48]),t[59]=W(e[49]),t[60]=W(e[57]),t[61]=W(e[58]),t[62]=W(e[62]),t[63]=W(e[63])}function y(e){const t=.5*Math.cos(.7853975),r=.5*Math.cos(3.14159/16),n=.5*Math.cos(3.14159/8),s=.5*Math.cos(3*3.14159/16),o=.5*Math.cos(.981746875),a=.5*Math.cos(3*3.14159/8),i=.5*Math.cos(1.374445625);for(var c=new Array(4),A=new Array(4),l=new Array(4),u=new Array(4),B=0;B<8;++B){var h=8*B;c[0]=n*e[h+2],c[1]=a*e[h+2],c[2]=n*e[h+6],c[3]=a*e[h+6],A[0]=r*e[h+1]+s*e[h+3]+o*e[h+5]+i*e[h+7],A[1]=s*e[h+1]-i*e[h+3]-r*e[h+5]-o*e[h+7],A[2]=o*e[h+1]-r*e[h+3]+i*e[h+5]+s*e[h+7],A[3]=i*e[h+1]-o*e[h+3]+s*e[h+5]-r*e[h+7],l[0]=t*(e[h+0]+e[h+4]),l[3]=t*(e[h+0]-e[h+4]),l[1]=c[0]+c[3],l[2]=c[1]-c[2],u[0]=l[0]+l[1],u[1]=l[3]+l[2],u[2]=l[3]-l[2],u[3]=l[0]-l[1],e[h+0]=u[0]+A[0],e[h+1]=u[1]+A[1],e[h+2]=u[2]+A[2],e[h+3]=u[3]+A[3],e[h+4]=u[3]-A[3],e[h+5]=u[2]-A[2],e[h+6]=u[1]-A[1],e[h+7]=u[0]-A[0]}for(var d=0;d<8;++d)c[0]=n*e[16+d],c[1]=a*e[16+d],c[2]=n*e[48+d],c[3]=a*e[48+d],A[0]=r*e[8+d]+s*e[24+d]+o*e[40+d]+i*e[56+d],A[1]=s*e[8+d]-i*e[24+d]-r*e[40+d]-o*e[56+d],A[2]=o*e[8+d]-r*e[24+d]+i*e[40+d]+s*e[56+d],A[3]=i*e[8+d]-o*e[24+d]+s*e[40+d]-r*e[56+d],l[0]=t*(e[d]+e[32+d]),l[3]=t*(e[d]-e[32+d]),l[1]=c[0]+c[3],l[2]=c[1]-c[2],u[0]=l[0]+l[1],u[1]=l[3]+l[2],u[2]=l[3]-l[2],u[3]=l[0]-l[1],e[0+d]=u[0]+A[0],e[8+d]=u[1]+A[1],e[16+d]=u[2]+A[2],e[24+d]=u[3]+A[3],e[32+d]=u[3]-A[3],e[40+d]=u[2]-A[2],e[48+d]=u[1]-A[1],e[56+d]=u[0]-A[0]}function H(e){for(var t=0;t<64;++t){var r=e[0][t],n=e[1][t],s=e[2][t];e[0][t]=r+1.5747*s,e[1][t]=r-.1873*n-.4682*s,e[2][t]=r+1.8556*n}}function T(e,t,r){for(var n=0;n<64;++n)t[r+n]=a.DataUtils.toHalfFloat(w(e[n]))}function w(e){return e<=1?Math.sign(e)*Math.pow(Math.abs(e),2.2):Math.sign(e)*Math.pow(o,Math.abs(e)-1)}function x(e){return new DataView(e.array.buffer,e.offset.value,e.size)}function J(e){var t=e.viewer.buffer.slice(e.offset.value,e.offset.value+e.size),r=new Uint8Array(D(t)),n=new Uint8Array(r.length);return G(r),I(r,n),new DataView(n.buffer)}function U(e){var t=S(e.array.slice(e.offset.value,e.offset.value+e.size)),r=new Uint8Array(t.length);return G(t),I(t,r),new DataView(r.buffer)}function L(e){for(var r=e.viewer,n={value:e.offset.value},s=new Uint16Array(e.width*e.scanlineBlockSize*(e.channels*e.type)),o=new Uint8Array(8192),a=0,i=new Array(e.channels),c=0;c<e.channels;c++)i[c]={},i[c].start=a,i[c].end=i[c].start,i[c].nx=e.width,i[c].ny=e.lines,i[c].size=e.type,a+=i[c].nx*i[c].ny*i[c].size;var A=V(r,n),l=V(r,n);if(l>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(A<=l)for(c=0;c<l-A+1;c++)o[c+A]=X(r,n);var u=new Uint16Array(t),B=function(e,r){for(var n=0,s=0;s<t;++s)(0==s||e[s>>3]&1<<(7&s))&&(r[n++]=s);for(var o=n-1;n<t;)r[n++]=0;return o}(o,u),h=k(r,n);F(e.array,r,n,h,s,a);for(c=0;c<e.channels;++c)for(var d=i[c],f=0;f<i[c].size;++f)E(s,d.start+f,d.nx,d.size,d.ny,d.nx*d.size,B);!function(e,t,r){for(var n=0;n<r;++n)t[n]=e[t[n]]}(u,s,a);for(var C=0,m=new Uint8Array(s.buffer.byteLength),p=0;p<e.lines;p++)for(var g=0;g<e.channels;g++){var M=(d=i[g]).nx*d.size,v=new Uint8Array(s.buffer,2*d.end,2*M);m.set(v,C),C+=2*M,d.end+=M}return new DataView(m.buffer)}function O(e){var t=S(e.array.slice(e.offset.value,e.offset.value+e.size));const r=e.lines*e.channels*e.width,n=1==e.type?new Uint16Array(r):new Uint32Array(r);let s=0,o=0;const a=new Array(4);for(let i=0;i<e.lines;i++)for(let r=0;r<e.channels;r++){let r=0;switch(e.type){case 1:a[0]=s,a[1]=a[0]+e.width,s=a[1]+e.width;for(let s=0;s<e.width;++s){r+=t[a[0]++]<<8|t[a[1]++],n[o]=r,o++}break;case 2:a[0]=s,a[1]=a[0]+e.width,a[2]=a[1]+e.width,s=a[2]+e.width;for(let s=0;s<e.width;++s){r+=t[a[0]++]<<24|t[a[1]++]<<16|t[a[2]++]<<8,n[o]=r,o++}}}return new DataView(n.buffer)}function K(e){var t=e.viewer,r={value:e.offset.value},n=new Uint8Array(e.width*e.lines*(e.channels*e.type*2)),s={version:Y(t,r),unknownUncompressedSize:Y(t,r),unknownCompressedSize:Y(t,r),acCompressedSize:Y(t,r),dcCompressedSize:Y(t,r),rleCompressedSize:Y(t,r),rleUncompressedSize:Y(t,r),rleRawSize:Y(t,r),totalAcUncompressedCount:Y(t,r),totalDcUncompressedCount:Y(t,r),acCompression:Y(t,r)};if(s.version<2)throw"EXRLoader.parse: "+re.compression+" version "+s.version+" is unsupported";for(var o=new Array,a=V(t,r)-2;a>0;){var i=N(t.buffer,r),c=X(t,r),A=c>>2&3,l=new Int8Array([(c>>4)-1])[0],u=X(t,r);o.push({name:i,index:l,type:u,compression:A}),a-=i.length+3}for(var B=re.channels,h=new Array(e.channels),d=0;d<e.channels;++d){var f=h[d]={},C=B[d];f.name=C.name,f.compression=0,f.decoded=!1,f.type=C.pixelType,f.pLinear=C.pLinear,f.width=e.width,f.height=e.lines}for(var m={idx:new Array(3)},p=0;p<e.channels;++p)for(f=h[p],d=0;d<o.length;++d){var g=o[d];f.name==g.name&&(f.compression=g.compression,g.index>=0&&(m.idx[g.index]=p),f.offset=p)}if(s.acCompressedSize>0)switch(s.acCompression){case 0:var M=new Uint16Array(s.totalAcUncompressedCount);F(e.array,t,r,s.acCompressedSize,M,s.totalAcUncompressedCount);break;case 1:var v=S(e.array.slice(r.value,r.value+s.totalAcUncompressedCount));M=new Uint16Array(v.buffer);r.value+=s.totalAcUncompressedCount}if(s.dcCompressedSize>0){var E={array:e.array,offset:r,size:s.dcCompressedSize},G=new Uint16Array(U(E).buffer);r.value+=s.dcCompressedSize}if(s.rleRawSize>0){var I=D((v=S(e.array.slice(r.value,r.value+s.rleCompressedSize))).buffer);r.value+=s.rleCompressedSize}var w=0,x=new Array(h.length);for(d=0;d<x.length;++d)x[d]=new Array;for(var J=0;J<e.lines;++J)for(var L=0;L<h.length;++L)x[L].push(w),w+=h[L].width*e.type*2;!function(e,t,r,n,s,o){var a=new DataView(o.buffer),i=r[e.idx[0]].width,c=r[e.idx[0]].height,A=Math.floor(i/8),l=Math.ceil(i/8),u=Math.ceil(c/8),B=i-8*(l-1),h=c-8*(u-1),d={value:0},f=new Array(3),C=new Array(3),m=new Array(3),p=new Array(3),g=new Array(3);for(let R=0;R<3;++R)g[R]=t[e.idx[R]],f[R]=R<1?0:f[R-1]+l*u,C[R]=new Float32Array(64),m[R]=new Uint16Array(64),p[R]=new Uint16Array(64*l);for(let w=0;w<u;++w){var M=8;w==u-1&&(M=h);var v=8;for(let e=0;e<l;++e){e==l-1&&(v=B);for(let e=0;e<3;++e)m[e].fill(0),m[e][0]=s[f[e]++],R(d,n,m[e]),b(m[e],C[e]),y(C[e]);H(C);for(let t=0;t<3;++t)T(C[t],p[t],64*e)}let t=0;for(let n=0;n<3;++n){const s=r[e.idx[n]].type;for(let e=8*w;e<8*w+M;++e){t=g[n][e];for(let r=0;r<A;++r){const o=64*r+8*(7&e);a.setUint16(t+0*s,p[n][o+0],!0),a.setUint16(t+2*s,p[n][o+1],!0),a.setUint16(t+4*s,p[n][o+2],!0),a.setUint16(t+6*s,p[n][o+3],!0),a.setUint16(t+8*s,p[n][o+4],!0),a.setUint16(t+10*s,p[n][o+5],!0),a.setUint16(t+12*s,p[n][o+6],!0),a.setUint16(t+14*s,p[n][o+7],!0),t+=16*s}}if(A!=l)for(let e=8*w;e<8*w+M;++e){const t=g[n][e]+8*A*2*s,r=64*A+8*(7&e);for(let e=0;e<v;++e)a.setUint16(t+2*e*s,p[n][r+e],!0)}}}for(var E=new Uint16Array(i),F=(a=new DataView(o.buffer),0);F<3;++F){r[e.idx[F]].decoded=!0;var G=r[e.idx[F]].type;if(2==r[F].type)for(var I=0;I<c;++I){const e=g[F][I];for(var D=0;D<i;++D)E[D]=a.getUint16(e+2*D*G,!0);for(D=0;D<i;++D)a.setFloat32(e+2*D*G,W(E[D]),!0)}}}(m,x,h,M,G,n);for(d=0;d<h.length;++d){if(!(f=h[d]).decoded){if(2!==f.compression)throw"EXRLoader.parse: unsupported channel compression";var O=0,P=0;for(J=0;J<e.lines;++J){for(var K=x[d][O],_=0;_<f.width;++_){for(var k=0;k<2*f.type;++k)n[K++]=I[P+k*f.width*f.height];P++}O++}}}return new DataView(n.buffer)}function N(e,t){for(var r=new Uint8Array(e),n=0;0!=r[t.value+n];)n+=1;var s=(new TextDecoder).decode(r.slice(t.value,t.value+n));return t.value=t.value+n+1,s}function _(e,t){var r=e.getInt32(t.value,!0);return t.value=t.value+4,r}function k(e,t){var r=e.getUint32(t.value,!0);return t.value=t.value+4,r}function Q(e,t){var r=e[t.value];return t.value=t.value+1,r}function X(e,t){var r=e.getUint8(t.value);return t.value=t.value+1,r}const Y=function(e,t){let r;return r="getBigInt64"in DataView.prototype?Number(e.getBigInt64(t.value,!0)):e.getUint32(t.value+4,!0)+Number(e.getUint32(t.value,!0)<<32),t.value+=8,r};function j(e,t){var r=e.getFloat32(t.value,!0);return t.value+=4,r}function Z(e,t){return a.DataUtils.toHalfFloat(j(e,t))}function W(e){var t=(31744&e)>>10,r=1023&e;return(e>>15?-1:1)*(t?31===t?r?NaN:1/0:Math.pow(2,t-15)*(1+r/1024):r/1024*6103515625e-14)}function V(e,t){var r=e.getUint16(t.value,!0);return t.value+=2,r}function z(e,t){return W(V(e,t))}function q(e,t,r,n,s){return"string"===n||"stringvector"===n||"iccProfile"===n?function(e,t,r){var n=(new TextDecoder).decode(new Uint8Array(e).slice(t.value,t.value+r));return t.value=t.value+r,n}(t,r,s):"chlist"===n?function(e,t,r,n){for(var s=r.value,o=[];r.value<s+n-1;){var a=N(t,r),i=_(e,r),c=X(e,r);r.value+=3;var A=_(e,r),l=_(e,r);o.push({name:a,pixelType:i,pLinear:c,xSampling:A,ySampling:l})}return r.value+=1,o}(e,t,r,s):"chromaticities"===n?function(e,t){return{redX:j(e,t),redY:j(e,t),greenX:j(e,t),greenY:j(e,t),blueX:j(e,t),blueY:j(e,t),whiteX:j(e,t),whiteY:j(e,t)}}(e,r):"compression"===n?function(e,t){return["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"][X(e,t)]}(e,r):"box2i"===n?function(e,t){return{xMin:k(e,t),yMin:k(e,t),xMax:k(e,t),yMax:k(e,t)}}(e,r):"lineOrder"===n?function(e,t){return["INCREASING_Y"][X(e,t)]}(e,r):"float"===n?j(e,r):"v2f"===n?function(e,t){return[j(e,t),j(e,t)]}(e,r):"v3f"===n?function(e,t){return[j(e,t),j(e,t),j(e,t)]}(e,r):"int"===n?_(e,r):"rational"===n?function(e,t){return[_(e,t),k(e,t)]}(e,r):"timecode"===n?function(e,t){return[k(e,t),k(e,t)]}(e,r):"preview"===n?(r.value+=s,"skipped"):void(r.value+=s)}const $=new DataView(e),ee=new Uint8Array(e),te={value:0},re=function(e,t,r){const n={};if(20000630!=e.getUint32(0,!0))throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";n.version=e.getUint8(4);const s=e.getUint8(5);n.spec={singleTile:!!(2&s),longName:!!(4&s),deepFormat:!!(8&s),multiPart:!!(16&s)},r.value=8;for(var o=!0;o;){var a=N(t,r);if(0==a)o=!1;else{var i=N(t,r),c=q(e,t,r,i,k(e,r));void 0===c?console.warn("EXRLoader.parse: skipped unknown header attribute type '".concat(i,"'.")):n[a]=c}}if(0!=s)throw console.error("EXRHeader:",n),"THREE.EXRLoader: provided file is currently unsupported.";return n}($,e,te),ne=function(e,t,r,n,s){const o={size:0,viewer:t,array:r,offset:n,width:e.dataWindow.xMax-e.dataWindow.xMin+1,height:e.dataWindow.yMax-e.dataWindow.yMin+1,channels:e.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:e.channels[0].pixelType,uncompress:null,getter:null,format:null,[P?"colorSpace":"encoding"]:null};switch(e.compression){case"NO_COMPRESSION":o.lines=1,o.uncompress=x;break;case"RLE_COMPRESSION":o.lines=1,o.uncompress=J;break;case"ZIPS_COMPRESSION":o.lines=1,o.uncompress=U;break;case"ZIP_COMPRESSION":o.lines=16,o.uncompress=U;break;case"PIZ_COMPRESSION":o.lines=32,o.uncompress=L;break;case"PXR24_COMPRESSION":o.lines=16,o.uncompress=O;break;case"DWAA_COMPRESSION":o.lines=32,o.uncompress=K;break;case"DWAB_COMPRESSION":o.lines=256,o.uncompress=K;break;default:throw"EXRLoader.parse: "+e.compression+" is unsupported"}if(o.scanlineBlockSize=o.lines,1==o.type)switch(s){case a.FloatType:o.getter=z,o.inputSize=2;break;case a.HalfFloatType:o.getter=V,o.inputSize=2}else{if(2!=o.type)throw"EXRLoader.parse: unsupported pixelType "+o.type+" for "+e.compression+".";switch(s){case a.FloatType:o.getter=j,o.inputSize=4;break;case a.HalfFloatType:o.getter=Z,o.inputSize=4}}o.blockCount=(e.dataWindow.yMax+1)/o.scanlineBlockSize;for(var i=0;i<o.blockCount;i++)Y(t,n);o.outputChannels=3==o.channels?4:o.channels;const c=o.width*o.height*o.outputChannels;switch(s){case a.FloatType:o.byteArray=new Float32Array(c),o.channels<o.outputChannels&&o.byteArray.fill(1,0,c);break;case a.HalfFloatType:o.byteArray=new Uint16Array(c),o.channels<o.outputChannels&&o.byteArray.fill(15360,0,c);break;default:console.error("THREE.EXRLoader: unsupported type: ",s)}return o.bytesPerLine=o.width*o.inputSize*o.channels,4==o.outputChannels?o.format=a.RGBAFormat:o.format=a.RedFormat,P?o.colorSpace="srgb-linear":o.encoding=3e3,o}(re,$,ee,te,this.type),se={value:0},oe={R:0,G:1,B:2,A:3,Y:0};for(let a=0;a<ne.height/ne.scanlineBlockSize;a++){const e=k($,te);ne.size=k($,te),ne.lines=e+ne.scanlineBlockSize>ne.height?ne.height-e:ne.scanlineBlockSize;const t=ne.size<ne.lines*ne.bytesPerLine?ne.uncompress(ne):x(ne);te.value+=ne.size;for(let r=0;r<ne.scanlineBlockSize;r++){const e=r+a*ne.scanlineBlockSize;if(e>=ne.height)break;for(let n=0;n<ne.channels;n++){const s=oe[re.channels[n].name];for(let o=0;o<ne.width;o++){se.value=(r*(ne.channels*ne.width)+n*ne.width+o)*ne.inputSize;const a=(ne.height-1-e)*(ne.width*ne.outputChannels)+o*ne.outputChannels+s;ne.byteArray[a]=ne.getter(t,se)}}}}return{header:re,width:ne.width,height:ne.height,data:ne.byteArray,format:ne.format,[P?"colorSpace":"encoding"]:ne[P?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,r,n){return super.load(e,(function(e,r){P?e.colorSpace=r.colorSpace:e.encoding=r.encoding,e.minFilter=a.LinearFilter,e.magFilter=a.LinearFilter,e.generateMipmaps=!1,e.flipY=!1,t&&t(e,r)}),r,n)}}const N={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},_="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",k=e=>Array.isArray(e);function Q(){let{files:e=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:t="",preset:r,encoding:n,extensions:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var i;let A,l=null,u=!1;if(r){if(!(r in N))throw new Error("Preset must be one of: "+Object.keys(N).join(", "));e=N[r],t=_}if(u=k(e),A=k(e)?"cube":e.startsWith("data:application/exr")?"exr":e.startsWith("data:application/hdr")?"hdr":null==(i=e.split(".").pop())||null==(i=i.split("?"))||null==(i=i.shift())?void 0:i.toLowerCase(),l=u?a.CubeTextureLoader:"hdr"===A?c:"exr"===A?K:null,!l)throw new Error("useEnvironment: Unrecognized file extension: "+e);const B=(0,o.F)(l,u?[e]:e,(e=>{null==e.setPath||e.setPath(t),s&&s(e)})),h=u?B[0]:B;h.mapping=u?a.CubeReflectionMapping:a.EquirectangularReflectionMapping;return"colorSpace"in h?h.colorSpace=(null!==n&&void 0!==n?n:u)?"srgb":"srgb-linear":h.encoding=(null!==n&&void 0!==n?n:u)?3001:3e3,h}const X=e=>{return(t=e).current&&t.current.isScene?e.current:e;var t};function Y(e,t,r,n){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;const o=X(t||r),a=o.background,i=o.environment,c=o.backgroundBlurriness||0;return"only"!==e&&(o.environment=n),e&&(o.background=n),e&&void 0!==o.backgroundBlurriness&&(o.backgroundBlurriness=s),()=>{"only"!==e&&(o.environment=i),e&&(o.background=a),e&&void 0!==o.backgroundBlurriness&&(o.backgroundBlurriness=c)}}function j(e){let{scene:t,background:r=!1,blur:n,map:a}=e;const i=(0,o.A)((e=>e.scene));return s.useLayoutEffect((()=>{if(a)return Y(r,t,i,a,n)}),[i,t,a,r,n]),null}function Z(e){let{background:t=!1,scene:r,blur:n,...a}=e;const i=Q(a),c=(0,o.A)((e=>e.scene));return s.useLayoutEffect((()=>Y(t,r,c,i,n)),[i,t,r,c,n]),null}function W(e){let{children:t,near:r=1,far:n=1e3,resolution:i=256,frames:c=1,map:A,background:l=!1,blur:u,scene:B,files:h,path:d,preset:f,extensions:C}=e;const m=(0,o.A)((e=>e.gl)),p=(0,o.A)((e=>e.scene)),g=s.useRef(null),[M]=s.useState((()=>new a.Scene)),v=s.useMemo((()=>{const e=new a.WebGLCubeRenderTarget(i);return e.texture.type=a.HalfFloatType,e}),[i]);s.useLayoutEffect((()=>(1===c&&g.current.update(m,M),Y(l,B,p,v.texture,u))),[t,M,v.texture,B,p,l,c,m]);let E=1;return(0,o.C)((()=>{(c===1/0||E<c)&&(g.current.update(m,M),E++)})),s.createElement(s.Fragment,null,(0,o.g)(s.createElement(s.Fragment,null,t,s.createElement("cubeCamera",{ref:g,args:[r,n,v]}),h||f?s.createElement(Z,{background:!0,files:h,preset:f,path:d,extensions:C}):A?s.createElement(j,{background:!0,map:A,extensions:C}):null),M))}function V(e){var t,r,a,c;const A=Q(e),l=e.map||A;s.useMemo((()=>(0,o.e)({GroundProjectedEnvImpl:i})),[]);const u=s.useMemo((()=>[l]),[l]),B=null==(t=e.ground)?void 0:t.height,h=null==(r=e.ground)?void 0:r.radius,d=null!==(a=null==(c=e.ground)?void 0:c.scale)&&void 0!==a?a:1e3;return s.createElement(s.Fragment,null,s.createElement(j,(0,n.Z)({},e,{map:l})),s.createElement("groundProjectedEnvImpl",{args:u,scale:d,height:B,radius:h}))}function z(e){return e.ground?s.createElement(V,e):e.map?s.createElement(j,e):e.children?s.createElement(W,e):s.createElement(Z,e)}const q={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:"\n      varying vec2 vUv;\n\n      void main() {\n\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n      }\n  ",fragmentShader:"\n    uniform sampler2D tDiffuse;\n    uniform float h;\n\n    varying vec2 vUv;\n\n    void main() {\n\n    \tvec4 sum = vec4( 0.0 );\n\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;\n\n    \tgl_FragColor = sum;\n\n    }\n  "},$={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:"\n    varying vec2 vUv;\n\n    void main() {\n\n      vUv = uv;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n    }\n  ",fragmentShader:"\n\n  uniform sampler2D tDiffuse;\n  uniform float v;\n\n  varying vec2 vUv;\n\n  void main() {\n\n    vec4 sum = vec4( 0.0 );\n\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;\n\n    gl_FragColor = sum;\n\n  }\n  "},ee=s.forwardRef(((e,t)=>{let{scale:r=10,frames:i=1/0,opacity:c=1,width:A=1,height:l=1,blur:u=1,near:B=0,far:h=10,resolution:d=512,smooth:f=!0,color:C="#000000",depthWrite:m=!1,renderOrder:p,...g}=e;const M=s.useRef(null),v=(0,o.A)((e=>e.scene)),E=(0,o.A)((e=>e.gl)),F=s.useRef(null);A*=Array.isArray(r)?r[0]:r||1,l*=Array.isArray(r)?r[1]:r||1;const[G,I,D,R,b,y,H]=s.useMemo((()=>{const e=new a.WebGLRenderTarget(d,d),t=new a.WebGLRenderTarget(d,d);t.texture.generateMipmaps=e.texture.generateMipmaps=!1;const r=new a.PlaneGeometry(A,l).rotateX(Math.PI/2),n=new a.Mesh(r),s=new a.MeshDepthMaterial;s.depthTest=s.depthWrite=!1,s.onBeforeCompile=e=>{e.uniforms={...e.uniforms,ucolor:{value:new a.Color(C)}},e.fragmentShader=e.fragmentShader.replace("void main() {","uniform vec3 ucolor;\n           void main() {\n          "),e.fragmentShader=e.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor * fragCoordZ * 2.0, ( 1.0 - fragCoordZ ) * 1.0 );")};const o=new a.ShaderMaterial(q),i=new a.ShaderMaterial($);return i.depthTest=o.depthTest=!1,[e,r,s,n,o,i,t]}),[d,A,l,r,C]),T=e=>{R.visible=!0,R.material=b,b.uniforms.tDiffuse.value=G.texture,b.uniforms.h.value=1*e/256,E.setRenderTarget(H),E.render(R,F.current),R.material=y,y.uniforms.tDiffuse.value=H.texture,y.uniforms.v.value=1*e/256,E.setRenderTarget(G),E.render(R,F.current),R.visible=!1};let w,x,J=0;return(0,o.C)((()=>{F.current&&(i===1/0||J<i)&&(J++,w=v.background,x=v.overrideMaterial,M.current.visible=!1,v.background=null,v.overrideMaterial=D,E.setRenderTarget(G),E.render(v,F.current),T(u),f&&T(.4*u),E.setRenderTarget(null),M.current.visible=!0,v.overrideMaterial=x,v.background=w)})),s.useImperativeHandle(t,(()=>M.current),[]),s.createElement("group",(0,n.Z)({"rotation-x":Math.PI/2},g,{ref:M}),s.createElement("mesh",{renderOrder:p,geometry:I,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},s.createElement("meshBasicMaterial",{transparent:!0,map:G.texture,opacity:c,depthWrite:m})),s.createElement("orthographicCamera",{ref:F,args:[-A/2,A/2,l/2,-l/2,B,h]}))})),te=s.forwardRef((function(e,t){let{children:r,disable:o,disableX:i,disableY:c,disableZ:A,left:l,right:u,top:B,bottom:h,front:d,back:f,onCentered:C,precise:m=!0,cacheKey:p=0,...g}=e;const M=s.useRef(null),v=s.useRef(null),E=s.useRef(null);return s.useLayoutEffect((()=>{v.current.matrixWorld.identity();const e=(new a.Box3).setFromObject(E.current,m),t=new a.Vector3,r=new a.Sphere,n=e.max.x-e.min.x,s=e.max.y-e.min.y,p=e.max.z-e.min.z;e.getCenter(t),e.getBoundingSphere(r);const g=B?s/2:h?-s/2:0,F=l?-n/2:u?n/2:0,G=d?p/2:f?-p/2:0;v.current.position.set(o||i?0:-t.x+F,o||c?0:-t.y+g,o||A?0:-t.z+G),"undefined"!==typeof C&&C({parent:M.current.parent,container:M.current,width:n,height:s,depth:p,boundingBox:e,boundingSphere:r,center:t,verticalAlignment:g,horizontalAlignment:F,depthAlignment:G})}),[p,C,B,l,d,o,i,c,A,m,u,h,f]),s.useImperativeHandle(t,(()=>M.current),[]),s.createElement("group",(0,n.Z)({ref:M},g),s.createElement("group",{ref:v},s.createElement("group",{ref:E},r)))}));function re(e,t,r,n){const s=class extends a.ShaderMaterial{constructor(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const o=Object.entries(e);super({uniforms:o.reduce(((e,t)=>{let[r,n]=t;return{...e,...a.UniformsUtils.clone({[r]:{value:n}})}}),{}),vertexShader:t,fragmentShader:r}),this.key="",o.forEach((e=>{let[t]=e;return Object.defineProperty(this,t,{get:()=>this.uniforms[t].value,set:e=>this.uniforms[t].value=e})})),Object.assign(this,s),n&&n(this)}};return s.key=a.MathUtils.generateUUID(),s}const ne=re({},"void main() { }","void main() { gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0); discard;  }"),se=(()=>parseInt(a.REVISION.replace(/\D+/g,"")))();const oe=s.createContext(null),ae=re({color:new a.Color,blend:2,alphaTest:.75,opacity:0,map:null},"varying vec2 vUv;\n   void main() {\n     gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);\n     vUv = uv;\n   }","varying vec2 vUv;\n   uniform sampler2D map;\n   uniform vec3 color;\n   uniform float opacity;\n   uniform float alphaTest;\n   uniform float blend;\n   void main() {\n     vec4 sampledDiffuseColor = texture2D(map, vUv);\n     gl_FragColor = vec4(color * sampledDiffuseColor.r * blend, max(0.0, (1.0 - (sampledDiffuseColor.r + sampledDiffuseColor.g + sampledDiffuseColor.b) / alphaTest)) * opacity);\n     #include <tonemapping_fragment>\n     #include <".concat(se>=154?"colorspace_fragment":"encodings_fragment",">\n   }")),ie=s.forwardRef(((e,t)=>{let{children:r,temporal:n,frames:a=40,limit:i=1/0,blend:c=20,scale:A=10,opacity:l=1,alphaTest:u=.75,color:B="black",colorBlend:h=2,resolution:d=1024,toneMapped:f=!0,...C}=e;(0,o.e)({SoftShadowMaterial:ae});const m=(0,o.A)((e=>e.gl)),p=(0,o.A)((e=>e.scene)),g=(0,o.A)((e=>e.camera)),M=(0,o.A)((e=>e.invalidate)),v=s.useRef(null),E=s.useRef(null),[F]=s.useState((()=>new Ae(m,p,d)));s.useLayoutEffect((()=>{F.configure(v.current)}),[]);const G=s.useMemo((()=>({lights:new Map,temporal:!!n,frames:Math.max(2,a),blend:Math.max(2,a===1/0?c:a),count:0,getMesh:()=>v.current,reset:()=>{F.clear();const e=v.current.material;e.opacity=0,e.alphaTest=0,G.count=0},update:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=v.current.material;G.temporal?(t.opacity=Math.min(l,t.opacity+l/G.blend),t.alphaTest=Math.min(u,t.alphaTest+u/G.blend)):(t.opacity=l,t.alphaTest=u),E.current.visible=!0,F.prepare();for(let r=0;r<e;r++)G.lights.forEach((e=>e.update())),F.update(g,G.blend);E.current.visible=!1,F.finish()}})),[F,g,p,n,a,c,l,u]);return s.useLayoutEffect((()=>{G.reset(),G.temporal||G.frames===1/0||G.update(G.blend)})),s.useImperativeHandle(t,(()=>G),[G]),(0,o.C)((()=>{(G.temporal||G.frames===1/0)&&G.count<G.frames&&G.count<i&&(M(),G.update(),G.count++)})),s.createElement("group",C,s.createElement("group",{traverse:()=>null,ref:E},s.createElement(oe.Provider,{value:G},r)),s.createElement("mesh",{receiveShadow:!0,ref:v,scale:A,rotation:[-Math.PI/2,0,0]},s.createElement("planeGeometry",null),s.createElement("softShadowMaterial",{transparent:!0,depthWrite:!1,toneMapped:f,color:B,blend:h,map:F.progressiveLightMap2.texture})))})),ce=s.forwardRef(((e,t)=>{let{castShadow:r=!0,bias:o=.001,mapSize:i=512,size:c=5,near:A=.5,far:l=500,frames:u=1,position:B=[0,0,0],radius:h=1,amount:d=8,intensity:f=(se>=155?Math.PI:1),ambient:C=.5,...m}=e;const p=s.useRef(null),g=new a.Vector3(...B).length(),M=s.useContext(oe),v=s.useCallback((()=>{let e;if(p.current)for(let t=0;t<p.current.children.length;t++)if(e=p.current.children[t],Math.random()>C)e.position.set(B[0]+a.MathUtils.randFloatSpread(h),B[1]+a.MathUtils.randFloatSpread(h),B[2]+a.MathUtils.randFloatSpread(h));else{let t=Math.acos(2*Math.random()-1)-Math.PI/2,r=2*Math.PI*Math.random();e.position.set(Math.cos(t)*Math.cos(r)*g,Math.abs(Math.cos(t)*Math.sin(r)*g),Math.sin(t)*g)}}),[h,C,g,...B]),E=s.useMemo((()=>({update:v})),[v]);return s.useImperativeHandle(t,(()=>E),[E]),s.useLayoutEffect((()=>{const e=p.current;return M&&M.lights.set(e.uuid,E),()=>{M.lights.delete(e.uuid)}}),[M,E]),s.createElement("group",(0,n.Z)({ref:p},m),Array.from({length:d},((e,t)=>s.createElement("directionalLight",{key:t,castShadow:r,"shadow-bias":o,"shadow-mapSize":[i,i],intensity:f/d},s.createElement("orthographicCamera",{attach:"shadow-camera",args:[-c,c,c,-c,A,l]})))))}));class Ae{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1024;this.renderer=e,this.res=r,this.scene=t,this.buffer1Active=!1,this.lights=[],this.meshes=[],this.object=null,this.clearColor=new a.Color,this.clearAlpha=0;const n={type:a.HalfFloatType,magFilter:a.NearestFilter,minFilter:a.NearestFilter};this.progressiveLightMap1=new a.WebGLRenderTarget(this.res,this.res,n),this.progressiveLightMap2=new a.WebGLRenderTarget(this.res,this.res,n),this.discardMat=new ne,this.targetMat=new a.MeshLambertMaterial({fog:!1}),this.previousShadowMap={value:this.progressiveLightMap1.texture},this.averagingWindow={value:100},this.targetMat.onBeforeCompile=e=>{e.vertexShader="varying vec2 vUv;\n"+e.vertexShader.slice(0,-1)+"vUv = uv; gl_Position = vec4((uv - 0.5) * 2.0, 1.0, 1.0); }";const t=e.fragmentShader.indexOf("void main() {");e.fragmentShader="varying vec2 vUv;\n"+e.fragmentShader.slice(0,t)+"uniform sampler2D previousShadowMap;\n\tuniform float averagingWindow;\n"+e.fragmentShader.slice(t-1,-1)+"\nvec3 texelOld = texture2D(previousShadowMap, vUv).rgb;\n        gl_FragColor.rgb = mix(texelOld, gl_FragColor.rgb, 1.0/ averagingWindow);\n      }",e.uniforms.previousShadowMap=this.previousShadowMap,e.uniforms.averagingWindow=this.averagingWindow}}clear(){this.renderer.getClearColor(this.clearColor),this.clearAlpha=this.renderer.getClearAlpha(),this.renderer.setClearColor("black",1),this.renderer.setRenderTarget(this.progressiveLightMap1),this.renderer.clear(),this.renderer.setRenderTarget(this.progressiveLightMap2),this.renderer.clear(),this.renderer.setRenderTarget(null),this.renderer.setClearColor(this.clearColor,this.clearAlpha),this.lights=[],this.meshes=[],this.scene.traverse((e=>{!function(e){return!!e.geometry}(e)?function(e){return e.isLight}(e)&&this.lights.push({object:e,intensity:e.intensity}):this.meshes.push({object:e,material:e.material})}))}prepare(){this.lights.forEach((e=>e.object.intensity=0)),this.meshes.forEach((e=>e.object.material=this.discardMat))}finish(){this.lights.forEach((e=>e.object.intensity=e.intensity)),this.meshes.forEach((e=>e.object.material=e.material))}configure(e){this.object=e}update(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;if(!this.object)return;this.averagingWindow.value=t,this.object.material=this.targetMat;const r=this.buffer1Active?this.progressiveLightMap1:this.progressiveLightMap2,n=this.buffer1Active?this.progressiveLightMap2:this.progressiveLightMap1,s=this.scene.background;this.scene.background=null,this.renderer.setRenderTarget(r),this.previousShadowMap.value=n.texture,this.buffer1Active=!this.buffer1Active,this.renderer.render(this.scene,e),this.renderer.setRenderTarget(null),this.scene.background=s}}const le=e=>e&&e.isOrthographicCamera,ue=e=>e&&e.isBox3,Be=s.createContext(null);function he(e){let{children:t,damping:r=6,fit:n,clip:i,observe:c,margin:A=1.2,eps:l=.01,onFit:u}=e;const B=s.useRef(null),{camera:h,invalidate:d,size:f,controls:C}=(0,o.A)(),m=C,p=s.useRef(u);function g(e,t){return Math.abs(e.x-t.x)<l&&Math.abs(e.y-t.y)<l&&Math.abs(e.z-t.z)<l}function M(e,t,r,n){e.x=a.MathUtils.damp(e.x,t.x,r,n),e.y=a.MathUtils.damp(e.y,t.y,r,n),e.z=a.MathUtils.damp(e.z,t.z,r,n)}p.current=u;const[v]=s.useState((()=>({animating:!1,focus:new a.Vector3,camera:new a.Vector3,zoom:1}))),[E]=s.useState((()=>({focus:new a.Vector3,camera:new a.Vector3,zoom:1}))),[F]=s.useState((()=>new a.Box3)),G=s.useMemo((()=>{function e(){const e=F.getSize(new a.Vector3),t=F.getCenter(new a.Vector3),r=Math.max(e.x,e.y,e.z),n=le(h)?4*r:r/(2*Math.atan(Math.PI*h.fov/360)),s=le(h)?4*r:n/h.aspect,o=A*Math.max(n,s);return{box:F,size:e,center:t,distance:o}}return{getSize:e,refresh(t){if(ue(t))F.copy(t);else{const e=t||B.current;if(!e)return this;e.updateWorldMatrix(!0,!0),F.setFromObject(e)}if(F.isEmpty()){const e=h.position.length()||10;F.setFromCenterAndSize(new a.Vector3,new a.Vector3(e,e,e))}if("OrthographicTrackballControls"===(null==m?void 0:m.constructor.name)){const{distance:t}=e(),r=h.position.clone().sub(m.target).normalize().multiplyScalar(t),n=m.target.clone().add(r);h.position.copy(n)}return this},clip(){const{distance:t}=e();return m&&(m.maxDistance=10*t),h.near=t/100,h.far=100*t,h.updateProjectionMatrix(),m&&m.update(),d(),this},to(t){let{position:n,target:s}=t;v.camera.copy(h.position);const{center:o}=e();return E.camera.set(...n),s?E.focus.set(...s):E.focus.copy(o),r?v.animating=!0:h.position.set(...n),this},fit(){v.camera.copy(h.position),m&&v.focus.copy(m.target);const{center:t,distance:n}=e(),s=t.clone().sub(h.position).normalize().multiplyScalar(n);if(E.camera.copy(t).sub(s),E.focus.copy(t),le(h)){v.zoom=h.zoom;let e=0,n=0;const s=[new a.Vector3(F.min.x,F.min.y,F.min.z),new a.Vector3(F.min.x,F.max.y,F.min.z),new a.Vector3(F.min.x,F.min.y,F.max.z),new a.Vector3(F.min.x,F.max.y,F.max.z),new a.Vector3(F.max.x,F.max.y,F.max.z),new a.Vector3(F.max.x,F.max.y,F.min.z),new a.Vector3(F.max.x,F.min.y,F.max.z),new a.Vector3(F.max.x,F.min.y,F.min.z)];t.applyMatrix4(h.matrixWorldInverse);for(const r of s)r.applyMatrix4(h.matrixWorldInverse),e=Math.max(e,Math.abs(r.y-t.y)),n=Math.max(n,Math.abs(r.x-t.x));e*=2,n*=2;const o=(h.top-h.bottom)/e,i=(h.right-h.left)/n;E.zoom=Math.min(o,i)/A,r||(h.zoom=E.zoom,h.updateProjectionMatrix())}return r?v.animating=!0:(h.position.copy(E.camera),h.lookAt(E.focus),m&&(m.target.copy(E.focus),m.update())),p.current&&p.current(this.getSize()),d(),this}}}),[F,h,m,A,r,d]);s.useLayoutEffect((()=>{if(m){const e=()=>v.animating=!1;return m.addEventListener("start",e),()=>m.removeEventListener("start",e)}}),[m]);const I=s.useRef(0);return s.useLayoutEffect((()=>{(c||0===I.current++)&&(G.refresh(),n&&G.fit(),i&&G.clip())}),[f,i,n,c,h,m]),(0,o.C)(((e,t)=>{if(v.animating){if(M(v.focus,E.focus,r,t),M(v.camera,E.camera,r,t),v.zoom=a.MathUtils.damp(v.zoom,E.zoom,r,t),h.position.copy(v.camera),le(h)&&(h.zoom=v.zoom,h.updateProjectionMatrix()),m?(m.target.copy(v.focus),m.update()):h.lookAt(v.focus),d(),le(h)&&!(Math.abs(v.zoom-E.zoom)<l))return;if(!le(h)&&!g(v.camera,E.camera))return;if(m&&!g(v.focus,E.focus))return;v.animating=!1}})),s.createElement("group",{ref:B},s.createElement(Be.Provider,{value:G},t))}const de={rembrandt:{main:[1,2,1],fill:[-2,-.5,-2]},portrait:{main:[-1,2,.5],fill:[-1,.5,-1.5]},upfront:{main:[0,2,1],fill:[-1,.5,-1.5]},soft:{main:[-2,4,4],fill:[-1,.5,-1.5]}};function fe(e){let{radius:t,adjustCamera:r}=e;const n=s.useContext(Be);return s.useEffect((()=>{r&&n.refresh().clip().fit()}),[t,r]),null}function Ce(e){let{children:t,center:r,adjustCamera:o=!0,intensity:a=.5,shadows:i="contact",environment:c="city",preset:A="rembrandt",...l}=e;var u,B,h,d,f,C,m,p;const g="string"===typeof A?de[A]:A,[{radius:M,height:v},E]=s.useState({radius:0,width:0,height:0,depth:0}),F=null!==(u=null==i?void 0:i.bias)&&void 0!==u?u:-1e-4,G=null!==(B=null==i?void 0:i.normalBias)&&void 0!==B?B:0,I=null!==(h=null==i?void 0:i.size)&&void 0!==h?h:1024,D=null!==(d=null==i?void 0:i.offset)&&void 0!==d?d:0,R="contact"===i||"contact"===(null==i?void 0:i.type),b="accumulative"===i||"accumulative"===(null==i?void 0:i.type),y={..."object"===typeof i?i:{}},H=c?"string"===typeof c?{preset:c}:c:null,T=s.useCallback((e=>{const{width:t,height:n,depth:s,boundingSphere:o}=e;E({radius:o.radius,width:t,height:n,depth:s}),null!=r&&r.onCentered&&r.onCentered(e)}),[]);return s.createElement(s.Fragment,null,s.createElement("ambientLight",{intensity:a/3}),s.createElement("spotLight",{penumbra:1,position:[g.main[0]*M,g.main[1]*M,g.main[2]*M],intensity:2*a,castShadow:!!i,"shadow-bias":F,"shadow-normalBias":G,"shadow-mapSize":I}),s.createElement("pointLight",{position:[g.fill[0]*M,g.fill[1]*M,g.fill[2]*M],intensity:a}),s.createElement(he,(0,n.Z)({fit:!!o,clip:!!o,margin:Number(o),observe:!0},l),s.createElement(fe,{radius:M,adjustCamera:o}),s.createElement(te,(0,n.Z)({},r,{position:[0,D/2,0],onCentered:T}),t)),s.createElement("group",{position:[0,-v/2-D/2,0]},R&&s.createElement(ee,(0,n.Z)({scale:4*M,far:M,blur:2},y)),b&&s.createElement(ie,(0,n.Z)({temporal:!0,frames:100,alphaTest:.9,toneMapped:!0,scale:4*M},y),s.createElement(ce,{amount:null!==(f=y.amount)&&void 0!==f?f:8,radius:null!==(C=y.radius)&&void 0!==C?C:M,ambient:null!==(m=y.ambient)&&void 0!==m?m:.5,intensity:null!==(p=y.intensity)&&void 0!==p?p:1,position:[g.main[0]*M,g.main[1]*M,g.main[2]*M],size:4*M,bias:-F,mapSize:I}))),c&&s.createElement(z,H))}},915:(e,t,r)=>{r.d(t,{L:()=>le});var n=r(5825);const s=new WeakMap;class o extends n.Loader{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,r,s){const o=new n.FileLoader(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(e=>{const r={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(e,r).then(t).catch(s)}),r,s)}decodeDracoFile(e,t,r,n){const s={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:n||this.defaultAttributeTypes,useUniqueIDs:!!r};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const s in t.attributeTypes){const e=t.attributeTypes[s];void 0!==e.BYTES_PER_ELEMENT&&(t.attributeTypes[s]=e.name)}const r=JSON.stringify(t);if(s.has(e)){const t=s.get(e);if(t.key===r)return t.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let n;const o=this.workerNextTaskID++,a=e.byteLength,i=this._getWorker(o,a).then((r=>(n=r,new Promise(((r,s)=>{n._callbacks[o]={resolve:r,reject:s},n.postMessage({type:"decode",id:o,taskConfig:t,buffer:e},[e])}))))).then((e=>this._createGeometry(e.geometry)));return i.catch((()=>!0)).then((()=>{n&&o&&this._releaseTask(n,o)})),s.set(e,{key:r,promise:i}),i}_createGeometry(e){const t=new n.BufferGeometry;e.index&&t.setIndex(new n.BufferAttribute(e.index.array,1));for(let r=0;r<e.attributes.length;r++){const s=e.attributes[r],o=s.name,a=s.array,i=s.itemSize;t.setAttribute(o,new n.BufferAttribute(a,i))}return t}_loadLibrary(e,t){const r=new n.FileLoader(this.manager);return r.setPath(this.decoderPath),r.setResponseType(t),r.setWithCredentials(this.withCredentials),new Promise(((t,n)=>{r.load(e,t,void 0,n)}))}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e="object"!==typeof WebAssembly||"js"===this.decoderConfig.type,t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then((t=>{const r=t[0];e||(this.decoderConfig.wasmBinary=t[1]);const n=a.toString(),s=["/* draco decoder */",r,"","/* worker */",n.substring(n.indexOf("{")+1,n.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([s]))})),this.decoderPending}_getWorker(e,t){return this._initDecoder().then((()=>{if(this.workerPool.length<this.workerLimit){const e=new Worker(this.workerSourceURL);e._callbacks={},e._taskCosts={},e._taskLoad=0,e.postMessage({type:"init",decoderConfig:this.decoderConfig}),e.onmessage=function(t){const r=t.data;switch(r.type){case"decode":e._callbacks[r.id].resolve(r);break;case"error":e._callbacks[r.id].reject(r);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+r.type+'"')}},this.workerPool.push(e)}else this.workerPool.sort((function(e,t){return e._taskLoad>t._taskLoad?-1:1}));const r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=t,r._taskLoad+=t,r}))}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map((e=>e._taskLoad)))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function a(){let e,t;function r(e,t,r,n,s,o){const a=o.num_components(),i=r.num_points()*a,c=i*s.BYTES_PER_ELEMENT,A=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,s),l=e._malloc(c);t.GetAttributeDataArrayForAllPoints(r,o,A,c,l);const u=new s(e.HEAPF32.buffer,l,i).slice();return e._free(l),{name:n,array:u,itemSize:a}}onmessage=function(n){const s=n.data;switch(s.type){case"init":e=s.decoderConfig,t=new Promise((function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)}));break;case"decode":const n=s.buffer,o=s.taskConfig;t.then((e=>{const t=e.draco,a=new t.Decoder,i=new t.DecoderBuffer;i.Init(new Int8Array(n),n.byteLength);try{const e=function(e,t,n,s){const o=s.attributeIDs,a=s.attributeTypes;let i,c;const A=t.GetEncodedGeometryType(n);if(A===e.TRIANGULAR_MESH)i=new e.Mesh,c=t.DecodeBufferToMesh(n,i);else{if(A!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");i=new e.PointCloud,c=t.DecodeBufferToPointCloud(n,i)}if(!c.ok()||0===i.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+c.error_msg());const l={index:null,attributes:[]};for(const u in o){const n=self[a[u]];let c,A;if(s.useUniqueIDs)A=o[u],c=t.GetAttributeByUniqueId(i,A);else{if(A=t.GetAttributeId(i,e[o[u]]),-1===A)continue;c=t.GetAttribute(i,A)}l.attributes.push(r(e,t,i,u,n,c))}A===e.TRIANGULAR_MESH&&(l.index=function(e,t,r){const n=r.num_faces(),s=3*n,o=4*s,a=e._malloc(o);t.GetTrianglesUInt32Array(r,o,a);const i=new Uint32Array(e.HEAPF32.buffer,a,s).slice();return e._free(a),{array:i,itemSize:1}}(e,t,i));return e.destroy(i),l}(t,a,i,o),n=e.attributes.map((e=>e.array.buffer));e.index&&n.push(e.index.array.buffer),self.postMessage({type:"decode",id:s.id,geometry:e},n)}catch(c){console.error(c),self.postMessage({type:"error",id:s.id,error:c.message})}finally{t.destroy(i),t.destroy(a)}}))}}}let i;const c=()=>{if(i)return i;const e=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),t=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if("object"!==typeof WebAssembly)return{supported:!1};let r,n="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";WebAssembly.validate(e)&&(n="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");const s=WebAssembly.instantiate(function(e){const r=new Uint8Array(e.length);for(let t=0;t<e.length;++t){const n=e.charCodeAt(t);r[t]=n>96?n-71:n>64?n-65:n>47?n+4:n>46?63:62}let n=0;for(let s=0;s<e.length;++s)r[n++]=r[s]<60?t[r[s]]:64*(r[s]-60)+r[++s];return r.buffer.slice(0,n)}(n),{}).then((e=>{r=e.instance,r.exports.__wasm_call_ctors()}));function o(e,t,n,s,o,a){const i=r.exports.sbrk,c=n+3&-4,A=i(c*s),l=i(o.length),u=new Uint8Array(r.exports.memory.buffer);u.set(o,l);const B=e(A,n,s,l,o.length);if(0===B&&a&&a(A,c,s),t.set(u.subarray(A,A+n*s)),i(A-i(0)),0!==B)throw new Error("Malformed buffer data: ".concat(B))}const a={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},c={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return i={ready:s,supported:!0,decodeVertexBuffer(e,t,n,s,i){o(r.exports.meshopt_decodeVertexBuffer,e,t,n,s,r.exports[a[i]])},decodeIndexBuffer(e,t,n,s){o(r.exports.meshopt_decodeIndexBuffer,e,t,n,s)},decodeIndexSequence(e,t,n,s){o(r.exports.meshopt_decodeIndexSequence,e,t,n,s)},decodeGltfBuffer(e,t,n,s,i,A){o(r.exports[c[i]],e,t,n,s,r.exports[a[A]])}},i};function A(e,t){if(t===n.TrianglesDrawMode)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t===n.TriangleFanDrawMode||t===n.TriangleStripDrawMode){let r=e.getIndex();if(null===r){const t=[],n=e.getAttribute("position");if(void 0===n)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let e=0;e<n.count;e++)t.push(e);e.setIndex(t),r=e.getIndex()}const s=r.count-2,o=[];if(r)if(t===n.TriangleFanDrawMode)for(let e=1;e<=s;e++)o.push(r.getX(0)),o.push(r.getX(e)),o.push(r.getX(e+1));else for(let e=0;e<s;e++)e%2===0?(o.push(r.getX(e)),o.push(r.getX(e+1)),o.push(r.getX(e+2))):(o.push(r.getX(e+2)),o.push(r.getX(e+1)),o.push(r.getX(e)));o.length/3!==s&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const a=e.clone();return a.setIndex(o),a.clearGroups(),a}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e}const l=parseInt(n.REVISION.replace(/\D+/g,""));class u extends n.Loader{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(e){return new m(e)})),this.register((function(e){return new I(e)})),this.register((function(e){return new D(e)})),this.register((function(e){return new R(e)})),this.register((function(e){return new g(e)})),this.register((function(e){return new M(e)})),this.register((function(e){return new v(e)})),this.register((function(e){return new E(e)})),this.register((function(e){return new C(e)})),this.register((function(e){return new F(e)})),this.register((function(e){return new p(e)})),this.register((function(e){return new G(e)})),this.register((function(e){return new d(e)})),this.register((function(e){return new b(e)})),this.register((function(e){return new y(e)}))}load(e,t,r,s){const o=this;let a;a=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:n.LoaderUtils.extractUrlBase(e),this.manager.itemStart(e);const i=function(t){s?s(t):console.error(t),o.manager.itemError(e),o.manager.itemEnd(e)},c=new n.FileLoader(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,(function(r){try{o.parse(r,a,(function(r){t(r),o.manager.itemEnd(e)}),i)}catch(n){i(n)}}),r,i)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r,s){let o;const a={},i={};if("string"===typeof e)o=JSON.parse(e);else if(e instanceof ArrayBuffer){if(n.LoaderUtils.decodeText(new Uint8Array(e.slice(0,4)))===H){try{a[h.KHR_BINARY_GLTF]=new x(e)}catch(A){return void(s&&s(A))}o=JSON.parse(a[h.KHR_BINARY_GLTF].content)}else o=JSON.parse(n.LoaderUtils.decodeText(new Uint8Array(e)))}else o=e;if(void 0===o.asset||o.asset.version[0]<2)return void(s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const c=new se(o,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let n=0;n<this.pluginCallbacks.length;n++){const e=this.pluginCallbacks[n](c);i[e.name]=e,a[e.name]=!0}if(o.extensionsUsed)for(let n=0;n<o.extensionsUsed.length;++n){const e=o.extensionsUsed[n],t=o.extensionsRequired||[];switch(e){case h.KHR_MATERIALS_UNLIT:a[e]=new f;break;case h.KHR_DRACO_MESH_COMPRESSION:a[e]=new J(o,this.dracoLoader);break;case h.KHR_TEXTURE_TRANSFORM:a[e]=new U;break;case h.KHR_MESH_QUANTIZATION:a[e]=new L;break;default:t.indexOf(e)>=0&&void 0===i[e]&&console.warn('THREE.GLTFLoader: Unknown extension "'+e+'".')}}c.setExtensions(a),c.setPlugins(i),c.parse(r,s)}parseAsync(e,t){const r=this;return new Promise((function(n,s){r.parse(e,t,n,s)}))}}function B(){let e={};return{get:function(t){return e[t]},add:function(t,r){e[t]=r},remove:function(t){delete e[t]},removeAll:function(){e={}}}}const h={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class d{constructor(e){this.parser=e,this.name=h.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let r=0,n=t.length;r<n;r++){const n=t[r];n.extensions&&n.extensions[this.name]&&void 0!==n.extensions[this.name].light&&e._addNodeRef(this.cache,n.extensions[this.name].light)}}_loadLight(e){const t=this.parser,r="light:"+e;let s=t.cache.get(r);if(s)return s;const o=t.json,a=((o.extensions&&o.extensions[this.name]||{}).lights||[])[e];let i;const c=new n.Color(16777215);void 0!==a.color&&c.fromArray(a.color);const A=void 0!==a.range?a.range:0;switch(a.type){case"directional":i=new n.DirectionalLight(c),i.target.position.set(0,0,-1),i.add(i.target);break;case"point":i=new n.PointLight(c),i.distance=A;break;case"spot":i=new n.SpotLight(c),i.distance=A,a.spot=a.spot||{},a.spot.innerConeAngle=void 0!==a.spot.innerConeAngle?a.spot.innerConeAngle:0,a.spot.outerConeAngle=void 0!==a.spot.outerConeAngle?a.spot.outerConeAngle:Math.PI/4,i.angle=a.spot.outerConeAngle,i.penumbra=1-a.spot.innerConeAngle/a.spot.outerConeAngle,i.target.position.set(0,0,-1),i.add(i.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+a.type)}return i.position.set(0,0,0),i.decay=2,q(i,a),void 0!==a.intensity&&(i.intensity=a.intensity),i.name=t.createUniqueName(a.name||"light_"+e),s=Promise.resolve(i),t.cache.add(r,s),s}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){const t=this,r=this.parser,n=r.json.nodes[e],s=(n.extensions&&n.extensions[this.name]||{}).light;return void 0===s?null:this._loadLight(s).then((function(e){return r._getNodeRef(t.cache,s,e)}))}}class f{constructor(){this.name=h.KHR_MATERIALS_UNLIT}getMaterialType(){return n.MeshBasicMaterial}extendParams(e,t,r){const s=[];e.color=new n.Color(1,1,1),e.opacity=1;const o=t.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){const t=o.baseColorFactor;e.color.fromArray(t),e.opacity=t[3]}void 0!==o.baseColorTexture&&s.push(r.assignTexture(e,"map",o.baseColorTexture,3001))}return Promise.all(s)}}class C{constructor(e){this.parser=e,this.name=h.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const n=r.extensions[this.name].emissiveStrength;return void 0!==n&&(t.emissiveIntensity=n),Promise.resolve()}}class m{constructor(e){this.parser=e,this.name=h.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?n.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const r=this.parser,s=r.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],a=s.extensions[this.name];if(void 0!==a.clearcoatFactor&&(t.clearcoat=a.clearcoatFactor),void 0!==a.clearcoatTexture&&o.push(r.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),void 0!==a.clearcoatRoughnessFactor&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),void 0!==a.clearcoatRoughnessTexture&&o.push(r.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),void 0!==a.clearcoatNormalTexture&&(o.push(r.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),void 0!==a.clearcoatNormalTexture.scale)){const e=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new n.Vector2(e,e)}return Promise.all(o)}}class p{constructor(e){this.parser=e,this.name=h.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?n.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const r=this.parser,n=r.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[],o=n.extensions[this.name];return void 0!==o.iridescenceFactor&&(t.iridescence=o.iridescenceFactor),void 0!==o.iridescenceTexture&&s.push(r.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),void 0!==o.iridescenceIor&&(t.iridescenceIOR=o.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==o.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),void 0!==o.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),void 0!==o.iridescenceThicknessTexture&&s.push(r.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class g{constructor(e){this.parser=e,this.name=h.KHR_MATERIALS_SHEEN}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?n.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const r=this.parser,s=r.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[];t.sheenColor=new n.Color(0,0,0),t.sheenRoughness=0,t.sheen=1;const a=s.extensions[this.name];return void 0!==a.sheenColorFactor&&t.sheenColor.fromArray(a.sheenColorFactor),void 0!==a.sheenRoughnessFactor&&(t.sheenRoughness=a.sheenRoughnessFactor),void 0!==a.sheenColorTexture&&o.push(r.assignTexture(t,"sheenColorMap",a.sheenColorTexture,3001)),void 0!==a.sheenRoughnessTexture&&o.push(r.assignTexture(t,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(o)}}class M{constructor(e){this.parser=e,this.name=h.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?n.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const r=this.parser,n=r.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[],o=n.extensions[this.name];return void 0!==o.transmissionFactor&&(t.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&s.push(r.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class v{constructor(e){this.parser=e,this.name=h.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?n.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const r=this.parser,s=r.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],a=s.extensions[this.name];t.thickness=void 0!==a.thicknessFactor?a.thicknessFactor:0,void 0!==a.thicknessTexture&&o.push(r.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||1/0;const i=a.attenuationColor||[1,1,1];return t.attenuationColor=new n.Color(i[0],i[1],i[2]),Promise.all(o)}}class E{constructor(e){this.parser=e,this.name=h.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?n.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const n=r.extensions[this.name];return t.ior=void 0!==n.ior?n.ior:1.5,Promise.resolve()}}class F{constructor(e){this.parser=e,this.name=h.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?n.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const r=this.parser,s=r.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],a=s.extensions[this.name];t.specularIntensity=void 0!==a.specularFactor?a.specularFactor:1,void 0!==a.specularTexture&&o.push(r.assignTexture(t,"specularIntensityMap",a.specularTexture));const i=a.specularColorFactor||[1,1,1];return t.specularColor=new n.Color(i[0],i[1],i[2]),void 0!==a.specularColorTexture&&o.push(r.assignTexture(t,"specularColorMap",a.specularColorTexture,3001)),Promise.all(o)}}class G{constructor(e){this.parser=e,this.name=h.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?n.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const r=this.parser,n=r.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[],o=n.extensions[this.name];return void 0!==o.anisotropyStrength&&(t.anisotropy=o.anisotropyStrength),void 0!==o.anisotropyRotation&&(t.anisotropyRotation=o.anisotropyRotation),void 0!==o.anisotropyTexture&&s.push(r.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class I{constructor(e){this.parser=e,this.name=h.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,r=t.json,n=r.textures[e];if(!n.extensions||!n.extensions[this.name])return null;const s=n.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class D{constructor(e){this.parser=e,this.name=h.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,n=r.json,s=n.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=n.images[o.source];let i=r.textureLoader;if(a.uri){const e=r.options.manager.getHandler(a.uri);null!==e&&(i=e)}return this.detectSupport().then((function(s){if(s)return r.loadTextureImage(e,o.source,i);if(n.extensionsRequired&&n.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class R{constructor(e){this.parser=e,this.name=h.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,n=r.json,s=n.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=n.images[o.source];let i=r.textureLoader;if(a.uri){const e=r.options.manager.getHandler(a.uri);null!==e&&(i=e)}return this.detectSupport().then((function(s){if(s)return r.loadTextureImage(e,o.source,i);if(n.extensionsRequired&&n.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return r.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class b{constructor(e){this.name=h.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,r=t.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const e=r.extensions[this.name],n=this.parser.getDependency("buffer",e.buffer),s=this.parser.options.meshoptDecoder;if(!s||!s.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return n.then((function(t){const r=e.byteOffset||0,n=e.byteLength||0,o=e.count,a=e.byteStride,i=new Uint8Array(t,r,n);return s.decodeGltfBufferAsync?s.decodeGltfBufferAsync(o,a,i,e.mode,e.filter).then((function(e){return e.buffer})):s.ready.then((function(){const t=new ArrayBuffer(o*a);return s.decodeGltfBuffer(new Uint8Array(t),o,a,i,e.mode,e.filter),t}))}))}return null}}class y{constructor(e){this.name=h.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,r=t.nodes[e];if(!r.extensions||!r.extensions[this.name]||void 0===r.mesh)return null;const s=t.meshes[r.mesh];for(const n of s.primitives)if(n.mode!==K.TRIANGLES&&n.mode!==K.TRIANGLE_STRIP&&n.mode!==K.TRIANGLE_FAN&&void 0!==n.mode)return null;const o=r.extensions[this.name].attributes,a=[],i={};for(const n in o)a.push(this.parser.getDependency("accessor",o[n]).then((e=>(i[n]=e,i[n]))));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then((e=>{const t=e.pop(),r=t.isGroup?t.children:[t],s=e[0].count,o=[];for(const a of r){const e=new n.Matrix4,t=new n.Vector3,r=new n.Quaternion,c=new n.Vector3(1,1,1),A=new n.InstancedMesh(a.geometry,a.material,s);for(let n=0;n<s;n++)i.TRANSLATION&&t.fromBufferAttribute(i.TRANSLATION,n),i.ROTATION&&r.fromBufferAttribute(i.ROTATION,n),i.SCALE&&c.fromBufferAttribute(i.SCALE,n),A.setMatrixAt(n,e.compose(t,r,c));for(const n in i)"TRANSLATION"!==n&&"ROTATION"!==n&&"SCALE"!==n&&a.geometry.setAttribute(n,i[n]);n.Object3D.prototype.copy.call(A,a),this.parser.assignFinalMaterial(A),o.push(A)}return t.isGroup?(t.clear(),t.add(...o),t):o[0]})))}}const H="glTF",T=1313821514,w=5130562;class x{constructor(e){this.name=h.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12);if(this.header={magic:n.LoaderUtils.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==H)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-12,s=new DataView(e,12);let o=0;for(;o<r;){const t=s.getUint32(o,!0);o+=4;const r=s.getUint32(o,!0);if(o+=4,r===T){const r=new Uint8Array(e,12+o,t);this.content=n.LoaderUtils.decodeText(r)}else if(r===w){const r=12+o;this.body=e.slice(r,r+t)}o+=t}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class J{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=h.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const r=this.json,n=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},i={},c={};for(const A in o){const e=X[A]||A.toLowerCase();a[e]=o[A]}for(const A in e.attributes){const t=X[A]||A.toLowerCase();if(void 0!==o[A]){const n=r.accessors[e.attributes[A]],s=N[n.componentType];c[t]=s.name,i[t]=!0===n.normalized}}return t.getDependency("bufferView",s).then((function(e){return new Promise((function(t){n.decodeDracoFile(e,(function(e){for(const t in e.attributes){const r=e.attributes[t],n=i[t];void 0!==n&&(r.normalized=n)}t(e)}),a,c)}))}))}}class U{constructor(){this.name=h.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&t.texCoord!==e.channel||void 0!==t.offset||void 0!==t.rotation||void 0!==t.scale?(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0,e):e}}class L{constructor(){this.name=h.KHR_MESH_QUANTIZATION}}class S extends n.Interpolant{constructor(e,t,r,n){super(e,t,r,n)}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,n=this.valueSize,s=e*n*3+n;for(let o=0;o!==n;o++)t[o]=r[s+o];return t}interpolate_(e,t,r,n){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,i=2*a,c=3*a,A=n-t,l=(r-t)/A,u=l*l,B=u*l,h=e*c,d=h-c,f=-2*B+3*u,C=B-u,m=1-f,p=C-u+l;for(let g=0;g!==a;g++){const e=o[d+g+a],t=o[d+g+i]*A,r=o[h+g+a],n=o[h+g]*A;s[g]=m*e+p*t+f*r+C*n}return s}}const O=new n.Quaternion;class P extends S{interpolate_(e,t,r,n){const s=super.interpolate_(e,t,r,n);return O.fromArray(s).normalize().toArray(s),s}}const K={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},N={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},_={9728:n.NearestFilter,9729:n.LinearFilter,9984:n.NearestMipmapNearestFilter,9985:n.LinearMipmapNearestFilter,9986:n.NearestMipmapLinearFilter,9987:n.LinearMipmapLinearFilter},k={33071:n.ClampToEdgeWrapping,33648:n.MirroredRepeatWrapping,10497:n.RepeatWrapping},Q={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},X={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...l>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Y={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},j={CUBICSPLINE:void 0,LINEAR:n.InterpolateLinear,STEP:n.InterpolateDiscrete},Z="OPAQUE",W="MASK",V="BLEND";function z(e,t,r){for(const n in r.extensions)void 0===e[n]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[n]=r.extensions[n])}function q(e,t){void 0!==t.extras&&("object"===typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function $(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let r=0,n=t.weights.length;r<n;r++)e.morphTargetInfluences[r]=t.weights[r];if(t.extras&&Array.isArray(t.extras.targetNames)){const r=t.extras.targetNames;if(e.morphTargetInfluences.length===r.length){e.morphTargetDictionary={};for(let t=0,n=r.length;t<n;t++)e.morphTargetDictionary[r[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function ee(e){let t;const r=e.extensions&&e.extensions[h.KHR_DRACO_MESH_COMPRESSION];if(t=r?"draco:"+r.bufferView+":"+r.indices+":"+te(r.attributes):e.indices+":"+te(e.attributes)+":"+e.mode,void 0!==e.targets)for(let n=0,s=e.targets.length;n<s;n++)t+=":"+te(e.targets[n]);return t}function te(e){let t="";const r=Object.keys(e).sort();for(let n=0,s=r.length;n<s;n++)t+=r[n]+":"+e[r[n]]+";";return t}function re(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const ne=new n.Matrix4;class se{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new B,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let r=!1,s=!1,o=-1;"undefined"!==typeof navigator&&"undefined"!==typeof navigator.userAgent&&(r=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),s=navigator.userAgent.indexOf("Firefox")>-1,o=s?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),"undefined"===typeof createImageBitmap||r||s&&o<98?this.textureLoader=new n.TextureLoader(this.options.manager):this.textureLoader=new n.ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new n.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const r=this,n=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])})).then((function(t){const o={scene:t[0][n.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:n.asset,parser:r,userData:{}};z(s,o,n),q(o,n),Promise.all(r._invokeAll((function(e){return e.afterRoot&&e.afterRoot(o)}))).then((function(){e(o)}))})).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[];for(let n=0,s=t.length;n<s;n++){const r=t[n].joints;for(let t=0,n=r.length;t<n;t++)e[r[t]].isBone=!0}for(let n=0,s=e.length;n<s;n++){const t=e[n];void 0!==t.mesh&&(this._addNodeRef(this.meshCache,t.mesh),void 0!==t.skin&&(r[t.mesh].isSkinnedMesh=!0)),void 0!==t.camera&&this._addNodeRef(this.cameraCache,t.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,r){if(e.refs[t]<=1)return r;const n=r.clone(),s=(e,t)=>{const r=this.associations.get(e);null!=r&&this.associations.set(t,r);for(const[n,o]of e.children.entries())s(o,t.children[n])};return s(r,n),n.name+="_instance_"+e.uses[t]++,n}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let r=0;r<t.length;r++){const n=e(t[r]);if(n)return n}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const r=[];for(let n=0;n<t.length;n++){const s=e(t[n]);s&&r.push(s)}return r}getDependency(e,t){const r=e+":"+t;let n=this.cache.get(r);if(!n){switch(e){case"scene":n=this.loadScene(t);break;case"node":n=this._invokeOne((function(e){return e.loadNode&&e.loadNode(t)}));break;case"mesh":n=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":n=this.loadAccessor(t);break;case"bufferView":n=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":n=this.loadBuffer(t);break;case"material":n=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":n=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":n=this.loadSkin(t);break;case"animation":n=this._invokeOne((function(e){return e.loadAnimation&&e.loadAnimation(t)}));break;case"camera":n=this.loadCamera(t);break;default:if(n=this._invokeOne((function(r){return r!=this&&r.getDependency&&r.getDependency(e,t)})),!n)throw new Error("Unknown type: "+e)}this.cache.add(r,n)}return n}getDependencies(e){let t=this.cache.get(e);if(!t){const r=this,n=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(n.map((function(t,n){return r.getDependency(e,n)}))),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],r=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[h.KHR_BINARY_GLTF].body);const s=this.options;return new Promise((function(e,o){r.load(n.LoaderUtils.resolveURL(t.uri,s.path),e,void 0,(function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){const r=t.byteLength||0,n=t.byteOffset||0;return e.slice(n,n+r)}))}loadAccessor(e){const t=this,r=this.json,s=this.json.accessors[e];if(void 0===s.bufferView&&void 0===s.sparse){const e=Q[s.type],t=N[s.componentType],r=!0===s.normalized,o=new t(s.count*e);return Promise.resolve(new n.BufferAttribute(o,e,r))}const o=[];return void 0!==s.bufferView?o.push(this.getDependency("bufferView",s.bufferView)):o.push(null),void 0!==s.sparse&&(o.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(o).then((function(e){const o=e[0],a=Q[s.type],i=N[s.componentType],c=i.BYTES_PER_ELEMENT,A=c*a,l=s.byteOffset||0,u=void 0!==s.bufferView?r.bufferViews[s.bufferView].byteStride:void 0,B=!0===s.normalized;let h,d;if(u&&u!==A){const e=Math.floor(l/u),r="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+e+":"+s.count;let A=t.cache.get(r);A||(h=new i(o,e*u,s.count*u/c),A=new n.InterleavedBuffer(h,u/c),t.cache.add(r,A)),d=new n.InterleavedBufferAttribute(A,a,l%u/c,B)}else h=null===o?new i(s.count*a):new i(o,l,s.count*a),d=new n.BufferAttribute(h,a,B);if(void 0!==s.sparse){const t=Q.SCALAR,r=N[s.sparse.indices.componentType],c=s.sparse.indices.byteOffset||0,A=s.sparse.values.byteOffset||0,l=new r(e[1],c,s.sparse.count*t),u=new i(e[2],A,s.sparse.count*a);null!==o&&(d=new n.BufferAttribute(d.array.slice(),d.itemSize,d.normalized));for(let e=0,n=l.length;e<n;e++){const t=l[e];if(d.setX(t,u[e*a]),a>=2&&d.setY(t,u[e*a+1]),a>=3&&d.setZ(t,u[e*a+2]),a>=4&&d.setW(t,u[e*a+3]),a>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return d}))}loadTexture(e){const t=this.json,r=this.options,n=t.textures[e].source,s=t.images[n];let o=this.textureLoader;if(s.uri){const e=r.manager.getHandler(s.uri);null!==e&&(o=e)}return this.loadTextureImage(e,n,o)}loadTextureImage(e,t,r){const s=this,o=this.json,a=o.textures[e],i=o.images[t],c=(i.uri||i.bufferView)+":"+a.sampler;if(this.textureCache[c])return this.textureCache[c];const A=this.loadImageSource(t,r).then((function(t){t.flipY=!1,t.name=a.name||i.name||"",""===t.name&&"string"===typeof i.uri&&!1===i.uri.startsWith("data:image/")&&(t.name=i.uri);const r=(o.samplers||{})[a.sampler]||{};return t.magFilter=_[r.magFilter]||n.LinearFilter,t.minFilter=_[r.minFilter]||n.LinearMipmapLinearFilter,t.wrapS=k[r.wrapS]||n.RepeatWrapping,t.wrapT=k[r.wrapT]||n.RepeatWrapping,s.associations.set(t,{textures:e}),t})).catch((function(){return null}));return this.textureCache[c]=A,A}loadImageSource(e,t){const r=this,s=this.json,o=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then((e=>e.clone()));const a=s.images[e],i=self.URL||self.webkitURL;let c=a.uri||"",A=!1;if(void 0!==a.bufferView)c=r.getDependency("bufferView",a.bufferView).then((function(e){A=!0;const t=new Blob([e],{type:a.mimeType});return c=i.createObjectURL(t),c}));else if(void 0===a.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const l=Promise.resolve(c).then((function(e){return new Promise((function(r,s){let a=r;!0===t.isImageBitmapLoader&&(a=function(e){const t=new n.Texture(e);t.needsUpdate=!0,r(t)}),t.load(n.LoaderUtils.resolveURL(e,o.path),a,void 0,s)}))})).then((function(e){var t;return!0===A&&i.revokeObjectURL(c),e.userData.mimeType=a.mimeType||((t=a.uri).search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/)?"image/jpeg":t.search(/\.webp($|\?)/i)>0||0===t.search(/^data\:image\/webp/)?"image/webp":"image/png"),e})).catch((function(e){throw console.error("THREE.GLTFLoader: Couldn't load texture",c),e}));return this.sourceCache[e]=l,l}assignTexture(e,t,r,n){const s=this;return this.getDependency("texture",r.index).then((function(o){if(!o)return null;if(void 0!==r.texCoord&&r.texCoord>0&&((o=o.clone()).channel=r.texCoord),s.extensions[h.KHR_TEXTURE_TRANSFORM]){const e=void 0!==r.extensions?r.extensions[h.KHR_TEXTURE_TRANSFORM]:void 0;if(e){const t=s.associations.get(o);o=s.extensions[h.KHR_TEXTURE_TRANSFORM].extendTexture(o,e),s.associations.set(o,t)}}return void 0!==n&&("colorSpace"in o?o.colorSpace=3001===n?"srgb":"srgb-linear":o.encoding=n),e[t]=o,o}))}assignFinalMaterial(e){const t=e.geometry;let r=e.material;const s=void 0===t.attributes.tangent,o=void 0!==t.attributes.color,a=void 0===t.attributes.normal;if(e.isPoints){const e="PointsMaterial:"+r.uuid;let t=this.cache.get(e);t||(t=new n.PointsMaterial,n.Material.prototype.copy.call(t,r),t.color.copy(r.color),t.map=r.map,t.sizeAttenuation=!1,this.cache.add(e,t)),r=t}else if(e.isLine){const e="LineBasicMaterial:"+r.uuid;let t=this.cache.get(e);t||(t=new n.LineBasicMaterial,n.Material.prototype.copy.call(t,r),t.color.copy(r.color),t.map=r.map,this.cache.add(e,t)),r=t}if(s||o||a){let e="ClonedMaterial:"+r.uuid+":";s&&(e+="derivative-tangents:"),o&&(e+="vertex-colors:"),a&&(e+="flat-shading:");let t=this.cache.get(e);t||(t=r.clone(),o&&(t.vertexColors=!0),a&&(t.flatShading=!0),s&&(t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(r))),r=t}e.material=r}getMaterialType(){return n.MeshStandardMaterial}loadMaterial(e){const t=this,r=this.json,s=this.extensions,o=r.materials[e];let a;const i={},c=[];if((o.extensions||{})[h.KHR_MATERIALS_UNLIT]){const e=s[h.KHR_MATERIALS_UNLIT];a=e.getMaterialType(),c.push(e.extendParams(i,o,t))}else{const r=o.pbrMetallicRoughness||{};if(i.color=new n.Color(1,1,1),i.opacity=1,Array.isArray(r.baseColorFactor)){const e=r.baseColorFactor;i.color.fromArray(e),i.opacity=e[3]}void 0!==r.baseColorTexture&&c.push(t.assignTexture(i,"map",r.baseColorTexture,3001)),i.metalness=void 0!==r.metallicFactor?r.metallicFactor:1,i.roughness=void 0!==r.roughnessFactor?r.roughnessFactor:1,void 0!==r.metallicRoughnessTexture&&(c.push(t.assignTexture(i,"metalnessMap",r.metallicRoughnessTexture)),c.push(t.assignTexture(i,"roughnessMap",r.metallicRoughnessTexture))),a=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),c.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,i)}))))}!0===o.doubleSided&&(i.side=n.DoubleSide);const A=o.alphaMode||Z;if(A===V?(i.transparent=!0,i.depthWrite=!1):(i.transparent=!1,A===W&&(i.alphaTest=void 0!==o.alphaCutoff?o.alphaCutoff:.5)),void 0!==o.normalTexture&&a!==n.MeshBasicMaterial&&(c.push(t.assignTexture(i,"normalMap",o.normalTexture)),i.normalScale=new n.Vector2(1,1),void 0!==o.normalTexture.scale)){const e=o.normalTexture.scale;i.normalScale.set(e,e)}return void 0!==o.occlusionTexture&&a!==n.MeshBasicMaterial&&(c.push(t.assignTexture(i,"aoMap",o.occlusionTexture)),void 0!==o.occlusionTexture.strength&&(i.aoMapIntensity=o.occlusionTexture.strength)),void 0!==o.emissiveFactor&&a!==n.MeshBasicMaterial&&(i.emissive=(new n.Color).fromArray(o.emissiveFactor)),void 0!==o.emissiveTexture&&a!==n.MeshBasicMaterial&&c.push(t.assignTexture(i,"emissiveMap",o.emissiveTexture,3001)),Promise.all(c).then((function(){const r=new a(i);return o.name&&(r.name=o.name),q(r,o),t.associations.set(r,{materials:e}),o.extensions&&z(s,r,o),r}))}createUniqueName(e){const t=n.PropertyBinding.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,r=this.extensions,s=this.primitiveCache;function o(e){return r[h.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(r){return oe(r,e,t)}))}const a=[];for(let i=0,c=e.length;i<c;i++){const r=e[i],c=ee(r),A=s[c];if(A)a.push(A.promise);else{let e;e=r.extensions&&r.extensions[h.KHR_DRACO_MESH_COMPRESSION]?o(r):oe(new n.BufferGeometry,r,t),s[c]={primitive:r,promise:e},a.push(e)}}return Promise.all(a)}loadMesh(e){const t=this,r=this.json,s=this.extensions,o=r.meshes[e],a=o.primitives,i=[];for(let A=0,l=a.length;A<l;A++){const e=void 0===a[A].material?(void 0===(c=this.cache).DefaultMaterial&&(c.DefaultMaterial=new n.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:n.FrontSide})),c.DefaultMaterial):this.getDependency("material",a[A].material);i.push(e)}var c;return i.push(t.loadGeometries(a)),Promise.all(i).then((function(r){const i=r.slice(0,r.length-1),c=r[r.length-1],l=[];for(let B=0,h=c.length;B<h;B++){const r=c[B],u=a[B];let h;const d=i[B];if(u.mode===K.TRIANGLES||u.mode===K.TRIANGLE_STRIP||u.mode===K.TRIANGLE_FAN||void 0===u.mode)h=!0===o.isSkinnedMesh?new n.SkinnedMesh(r,d):new n.Mesh(r,d),!0===h.isSkinnedMesh&&h.normalizeSkinWeights(),u.mode===K.TRIANGLE_STRIP?h.geometry=A(h.geometry,n.TriangleStripDrawMode):u.mode===K.TRIANGLE_FAN&&(h.geometry=A(h.geometry,n.TriangleFanDrawMode));else if(u.mode===K.LINES)h=new n.LineSegments(r,d);else if(u.mode===K.LINE_STRIP)h=new n.Line(r,d);else if(u.mode===K.LINE_LOOP)h=new n.LineLoop(r,d);else{if(u.mode!==K.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+u.mode);h=new n.Points(r,d)}Object.keys(h.geometry.morphAttributes).length>0&&$(h,o),h.name=t.createUniqueName(o.name||"mesh_"+e),q(h,o),u.extensions&&z(s,h,u),t.assignFinalMaterial(h),l.push(h)}for(let n=0,s=l.length;n<s;n++)t.associations.set(l[n],{meshes:e,primitives:n});if(1===l.length)return o.extensions&&z(s,l[0],o),l[0];const u=new n.Group;o.extensions&&z(s,u,o),t.associations.set(u,{meshes:e});for(let e=0,t=l.length;e<t;e++)u.add(l[e]);return u}))}loadCamera(e){let t;const r=this.json.cameras[e],s=r[r.type];if(s)return"perspective"===r.type?t=new n.PerspectiveCamera(n.MathUtils.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):"orthographic"===r.type&&(t=new n.OrthographicCamera(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),r.name&&(t.name=this.createUniqueName(r.name)),q(t,r),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],r=[];for(let n=0,s=t.joints.length;n<s;n++)r.push(this._loadNodeShallow(t.joints[n]));return void 0!==t.inverseBindMatrices?r.push(this.getDependency("accessor",t.inverseBindMatrices)):r.push(null),Promise.all(r).then((function(e){const r=e.pop(),s=e,o=[],a=[];for(let i=0,c=s.length;i<c;i++){const e=s[i];if(e){o.push(e);const t=new n.Matrix4;null!==r&&t.fromArray(r.array,16*i),a.push(t)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[i])}return new n.Skeleton(o,a)}))}loadAnimation(e){const t=this.json.animations[e],r=t.name?t.name:"animation_"+e,s=[],o=[],a=[],i=[],c=[];for(let n=0,A=t.channels.length;n<A;n++){const e=t.channels[n],r=t.samplers[e.sampler],A=e.target,l=A.node,u=void 0!==t.parameters?t.parameters[r.input]:r.input,B=void 0!==t.parameters?t.parameters[r.output]:r.output;void 0!==A.node&&(s.push(this.getDependency("node",l)),o.push(this.getDependency("accessor",u)),a.push(this.getDependency("accessor",B)),i.push(r),c.push(A))}return Promise.all([Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(i),Promise.all(c)]).then((function(e){const t=e[0],s=e[1],o=e[2],a=e[3],i=e[4],c=[];for(let r=0,A=t.length;r<A;r++){const e=t[r],A=s[r],l=o[r],u=a[r],B=i[r];if(void 0===e)continue;let h;switch(e.updateMatrix(),Y[B.path]){case Y.weights:h=n.NumberKeyframeTrack;break;case Y.rotation:h=n.QuaternionKeyframeTrack;break;default:h=n.VectorKeyframeTrack}const d=e.name?e.name:e.uuid,f=void 0!==u.interpolation?j[u.interpolation]:n.InterpolateLinear,C=[];Y[B.path]===Y.weights?e.traverse((function(e){e.morphTargetInfluences&&C.push(e.name?e.name:e.uuid)})):C.push(d);let m=l.array;if(l.normalized){const e=re(m.constructor),t=new Float32Array(m.length);for(let r=0,n=m.length;r<n;r++)t[r]=m[r]*e;m=t}for(let t=0,r=C.length;t<r;t++){const e=new h(C[t]+"."+Y[B.path],A.array,m,f);"CUBICSPLINE"===u.interpolation&&(e.createInterpolant=function(e){return new(this instanceof n.QuaternionKeyframeTrack?P:S)(this.times,this.values,this.getValueSize()/3,e)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),c.push(e)}}return new n.AnimationClip(r,void 0,c)}))}createNodeMesh(e){const t=this.json,r=this,n=t.nodes[e];return void 0===n.mesh?null:r.getDependency("mesh",n.mesh).then((function(e){const t=r._getNodeRef(r.meshCache,n.mesh,e);return void 0!==n.weights&&t.traverse((function(e){if(e.isMesh)for(let t=0,r=n.weights.length;t<r;t++)e.morphTargetInfluences[t]=n.weights[t]})),t}))}loadNode(e){const t=this,r=this.json.nodes[e],n=t._loadNodeShallow(e),s=[],o=r.children||[];for(let i=0,c=o.length;i<c;i++)s.push(t.getDependency("node",o[i]));const a=void 0===r.skin?Promise.resolve(null):t.getDependency("skin",r.skin);return Promise.all([n,Promise.all(s),a]).then((function(e){const t=e[0],r=e[1],n=e[2];null!==n&&t.traverse((function(e){e.isSkinnedMesh&&e.bind(n,ne)}));for(let s=0,o=r.length;s<o;s++)t.add(r[s]);return t}))}_loadNodeShallow(e){const t=this.json,r=this.extensions,s=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];const o=t.nodes[e],a=o.name?s.createUniqueName(o.name):"",i=[],c=s._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));return c&&i.push(c),void 0!==o.camera&&i.push(s.getDependency("camera",o.camera).then((function(e){return s._getNodeRef(s.cameraCache,o.camera,e)}))),s._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){i.push(e)})),this.nodeCache[e]=Promise.all(i).then((function(t){let i;if(i=!0===o.isBone?new n.Bone:t.length>1?new n.Group:1===t.length?t[0]:new n.Object3D,i!==t[0])for(let e=0,r=t.length;e<r;e++)i.add(t[e]);if(o.name&&(i.userData.name=o.name,i.name=a),q(i,o),o.extensions&&z(r,i,o),void 0!==o.matrix){const e=new n.Matrix4;e.fromArray(o.matrix),i.applyMatrix4(e)}else void 0!==o.translation&&i.position.fromArray(o.translation),void 0!==o.rotation&&i.quaternion.fromArray(o.rotation),void 0!==o.scale&&i.scale.fromArray(o.scale);return s.associations.has(i)||s.associations.set(i,{}),s.associations.get(i).nodes=e,i})),this.nodeCache[e]}loadScene(e){const t=this.extensions,r=this.json.scenes[e],s=this,o=new n.Group;r.name&&(o.name=s.createUniqueName(r.name)),q(o,r),r.extensions&&z(t,o,r);const a=r.nodes||[],i=[];for(let n=0,c=a.length;n<c;n++)i.push(s.getDependency("node",a[n]));return Promise.all(i).then((function(e){for(let t=0,r=e.length;t<r;t++)o.add(e[t]);return s.associations=(e=>{const t=new Map;for(const[r,o]of s.associations)(r instanceof n.Material||r instanceof n.Texture)&&t.set(r,o);return e.traverse((e=>{const r=s.associations.get(e);null!=r&&t.set(e,r)})),t})(o),o}))}}function oe(e,t,r){const s=t.attributes,o=[];function a(t,n){return r.getDependency("accessor",t).then((function(t){e.setAttribute(n,t)}))}for(const n in s){const t=X[n]||n.toLowerCase();t in e.attributes||o.push(a(s[n],t))}if(void 0!==t.indices&&!e.index){const n=r.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));o.push(n)}return q(e,t),function(e,t,r){const s=t.attributes,o=new n.Box3;if(void 0===s.POSITION)return;{const e=r.json.accessors[s.POSITION],t=e.min,a=e.max;if(void 0===t||void 0===a)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(o.set(new n.Vector3(t[0],t[1],t[2]),new n.Vector3(a[0],a[1],a[2])),e.normalized){const t=re(N[e.componentType]);o.min.multiplyScalar(t),o.max.multiplyScalar(t)}}const a=t.targets;if(void 0!==a){const e=new n.Vector3,t=new n.Vector3;for(let n=0,s=a.length;n<s;n++){const s=a[n];if(void 0!==s.POSITION){const n=r.json.accessors[s.POSITION],o=n.min,a=n.max;if(void 0!==o&&void 0!==a){if(t.setX(Math.max(Math.abs(o[0]),Math.abs(a[0]))),t.setY(Math.max(Math.abs(o[1]),Math.abs(a[1]))),t.setZ(Math.max(Math.abs(o[2]),Math.abs(a[2]))),n.normalized){const e=re(N[n.componentType]);t.multiplyScalar(e)}e.max(t)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}o.expandByVector(e)}e.boundingBox=o;const i=new n.Sphere;o.getCenter(i.center),i.radius=o.min.distanceTo(o.max)/2,e.boundingSphere=i}(e,t,r),Promise.all(o).then((function(){return void 0!==t.targets?function(e,t,r){let n=!1,s=!1,o=!1;for(let A=0,l=t.length;A<l;A++){const e=t[A];if(void 0!==e.POSITION&&(n=!0),void 0!==e.NORMAL&&(s=!0),void 0!==e.COLOR_0&&(o=!0),n&&s&&o)break}if(!n&&!s&&!o)return Promise.resolve(e);const a=[],i=[],c=[];for(let A=0,l=t.length;A<l;A++){const l=t[A];if(n){const t=void 0!==l.POSITION?r.getDependency("accessor",l.POSITION):e.attributes.position;a.push(t)}if(s){const t=void 0!==l.NORMAL?r.getDependency("accessor",l.NORMAL):e.attributes.normal;i.push(t)}if(o){const t=void 0!==l.COLOR_0?r.getDependency("accessor",l.COLOR_0):e.attributes.color;c.push(t)}}return Promise.all([Promise.all(a),Promise.all(i),Promise.all(c)]).then((function(t){const r=t[0],a=t[1],i=t[2];return n&&(e.morphAttributes.position=r),s&&(e.morphAttributes.normal=a),o&&(e.morphAttributes.color=i),e.morphTargetsRelative=!0,e}))}(e,t.targets,r):e}))}var ae=r(238);let ie=null,ce="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function Ae(e,t,r){return n=>{r&&r(n),e&&(ie||(ie=new o),ie.setDecoderPath("string"===typeof e?e:ce),n.setDRACOLoader(ie)),t&&n.setMeshoptDecoder("function"===typeof c?c():c)}}function le(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3?arguments[3]:void 0;return(0,ae.F)(u,e,Ae(t,r,n))}le.preload=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3?arguments[3]:void 0;return ae.F.preload(u,e,Ae(t,r,n))},le.clear=e=>ae.F.clear(u,e),le.setDecoderPath=e=>{ce=e}}}]);